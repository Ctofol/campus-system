{"version":3,"file":"student-detail.js","sources":["pages/teacher/approve/student-detail.vue","E:/HBuilderX/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdGVhY2hlci9hcHByb3ZlL3N0dWRlbnQtZGV0YWlsLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"header\">\n      <text class=\"title\">{{ studentName }} 的运动记录</text>\n    </view>\n    \n    <view class=\"stats-card\">\n      <view class=\"stat-item\">\n        <text class=\"stat-num\">{{ totalDistance }}</text>\n        <text class=\"stat-label\">总里程(km)</text>\n      </view>\n      <view class=\"stat-divider\"></view>\n      <view class=\"stat-item\">\n        <text class=\"stat-num\">{{ totalDuration }}</text>\n        <text class=\"stat-label\">总时长(min)</text>\n      </view>\n      <view class=\"stat-divider\"></view>\n      <view class=\"stat-item\">\n        <text class=\"stat-num\">{{ activities.length }}</text>\n        <text class=\"stat-label\">总次数</text>\n      </view>\n    </view>\n\n    <scroll-view scroll-y class=\"list\">\n      <view class=\"item\" v-for=\"item in activities\" :key=\"item.id\">\n        <view class=\"info\">\n          <text class=\"type\">{{ item.type === 'run' ? '跑步' : '体测' }}</text>\n          <text class=\"desc\">\n             {{ item.metrics?.distance ? Number(item.metrics.distance).toFixed(2) : 0 }}km | \n             {{ item.metrics?.duration ? Math.floor(item.metrics.duration / 60) : 0 }}分钟\n          </text>\n          <text class=\"time\">{{ new Date(item.started_at).toLocaleString() }}</text>\n        </view>\n        <view class=\"status-tag\" :class=\"item.status\">\n            {{ getStatusText(item.status) }}\n        </view>\n      </view>\n      <view v-if=\"activities.length === 0\" class=\"empty\">暂无运动记录</view>\n    </scroll-view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\nimport { getTeacherStudentActivities } from '@/utils/request.js';\n\nconst studentId = ref(null);\nconst studentName = ref('');\nconst activities = ref([]);\n\nconst totalDistance = computed(() => {\n    const dist = activities.value.reduce((acc, cur) => acc + (cur.metrics?.distance || 0), 0);\n    return dist.toFixed(2);\n});\n\nconst totalDuration = computed(() => {\n    const dur = activities.value.reduce((acc, cur) => acc + (cur.metrics?.duration || 0), 0);\n    return Math.floor(dur / 60);\n});\n\nconst getStatusText = (status) => {\n    const map = {\n        'pending': '待审批',\n        'approved': '已通过',\n        'rejected': '已驳回',\n        'completed': '已完成',\n        'finished': '已完成' // Default backend status\n    };\n    return map[status] || status;\n};\n\nconst loadStudentData = async () => {\n    if (!studentId.value) return;\n    try {\n        const res = await getTeacherStudentActivities(studentId.value, { page: 1, size: 100 });\n        if (res && res.items) {\n            activities.value = res.items;\n        }\n    } catch (e) {\n        console.error(e);\n        uni.showToast({ title: '加载失败', icon: 'none' });\n    }\n};\n\nonLoad((options) => {\n    if (options.studentId) {\n        studentId.value = options.studentId;\n        studentName.value = options.studentName || '学生';\n        loadStudentData();\n    }\n});\n</script>\n\n<style>\n.container { padding: 20rpx; background-color: #f5f7fa; min-height: 100vh; }\n.header { margin-bottom: 20rpx; font-weight: bold; font-size: 32rpx; padding: 10rpx 0; }\n.stats-card { display: flex; background: #fff; padding: 30rpx; border-radius: 12rpx; margin-bottom: 20rpx; justify-content: space-around; align-items: center; }\n.stat-item { display: flex; flex-direction: column; align-items: center; }\n.stat-num { font-size: 36rpx; font-weight: bold; color: #20C997; }\n.stat-label { font-size: 24rpx; color: #666; margin-top: 10rpx; }\n.stat-divider { width: 1px; height: 60rpx; background: #eee; }\n\n.item { display: flex; justify-content: space-between; align-items: center; background: #fff; padding: 30rpx; margin-bottom: 20rpx; border-radius: 12rpx; }\n.info { display: flex; flex-direction: column; }\n.type { font-weight: bold; font-size: 30rpx; margin-bottom: 8rpx; }\n.desc { color: #666; font-size: 26rpx; margin-bottom: 8rpx; }\n.time { color: #999; font-size: 22rpx; }\n.status-tag { font-size: 24rpx; padding: 4rpx 12rpx; border-radius: 8rpx; background: #eee; color: #666; }\n.status-tag.approved, .status-tag.completed { background: #e6fcf5; color: #20C997; }\n.status-tag.rejected { background: #fff5f5; color: #fa5252; }\n.empty { text-align: center; color: #999; margin-top: 100rpx; font-size: 28rpx; }\n</style>","import MiniProgramPage from 'D:/PC/Document/HBuilderProjects/campus-system/fronted/pages/teacher/approve/student-detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","getTeacherStudentActivities","uni","onLoad","MiniProgramPage"],"mappings":";;;;;;AA+CA,UAAM,YAAYA,cAAAA,IAAI,IAAI;AAC1B,UAAM,cAAcA,cAAAA,IAAI,EAAE;AAC1B,UAAM,aAAaA,cAAAA,IAAI,CAAA,CAAE;AAEzB,UAAM,gBAAgBC,cAAQ,SAAC,MAAM;AACjC,YAAM,OAAO,WAAW,MAAM,OAAO,CAAC,KAAK,QAAQ;;AAAA,wBAAO,SAAI,YAAJ,mBAAa,aAAY;AAAA,SAAI,CAAC;AACxF,aAAO,KAAK,QAAQ,CAAC;AAAA,IACzB,CAAC;AAED,UAAM,gBAAgBA,cAAQ,SAAC,MAAM;AACjC,YAAM,MAAM,WAAW,MAAM,OAAO,CAAC,KAAK,QAAQ;;AAAA,wBAAO,SAAI,YAAJ,mBAAa,aAAY;AAAA,SAAI,CAAC;AACvF,aAAO,KAAK,MAAM,MAAM,EAAE;AAAA,IAC9B,CAAC;AAED,UAAM,gBAAgB,CAAC,WAAW;AAC9B,YAAM,MAAM;AAAA,QACR,WAAW;AAAA,QACX,YAAY;AAAA,QACZ,YAAY;AAAA,QACZ,aAAa;AAAA,QACb,YAAY;AAAA;AAAA,MACpB;AACI,aAAO,IAAI,MAAM,KAAK;AAAA,IAC1B;AAEA,UAAM,kBAAkB,YAAY;AAChC,UAAI,CAAC,UAAU;AAAO;AACtB,UAAI;AACA,cAAM,MAAM,MAAMC,0CAA4B,UAAU,OAAO,EAAE,MAAM,GAAG,MAAM,IAAG,CAAE;AACrF,YAAI,OAAO,IAAI,OAAO;AAClB,qBAAW,QAAQ,IAAI;AAAA,QAC1B;AAAA,MACJ,SAAQ,GAAG;AACRC,sBAAAA,MAAA,MAAA,SAAA,kDAAc,CAAC;AACfA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAM,CAAE;AAAA,MAChD;AAAA,IACL;AAEAC,kBAAM,OAAC,CAAC,YAAY;AAChB,UAAI,QAAQ,WAAW;AACnB,kBAAU,QAAQ,QAAQ;AAC1B,oBAAY,QAAQ,QAAQ,eAAe;AAC3C;MACH;AAAA,IACL,CAAC;;;;;;;;;;;;;;;;;;;;;;;;AC1FD,GAAG,WAAWC,SAAe;"}