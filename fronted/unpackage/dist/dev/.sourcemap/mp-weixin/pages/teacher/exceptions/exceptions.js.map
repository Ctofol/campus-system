{"version":3,"file":"exceptions.js","sources":["pages/teacher/exceptions/exceptions.vue","E:/HBuilderX/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdGVhY2hlci9leGNlcHRpb25zL2V4Y2VwdGlvbnMudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"header\">\n      <text class=\"page-title\">异常处理</text>\n      <view class=\"stats-row\">\n        <view class=\"stat-item\">\n          <text class=\"stat-num\">{{ pendingCount }}</text>\n          <text class=\"stat-desc\">待处理</text>\n        </view>\n        <view class=\"stat-item\">\n          <text class=\"stat-num\">{{ todayCount }}</text>\n          <text class=\"stat-desc\">今日新增</text>\n        </view>\n      </view>\n    </view>\n\n    <view class=\"filter-bar\">\n      <text \n        class=\"filter-item\" \n        :class=\"{ active: currentFilter === 'all' }\" \n        @click=\"currentFilter = 'all'\"\n      >全部</text>\n      <text \n        class=\"filter-item\" \n        :class=\"{ active: currentFilter === 'urgent' }\" \n        @click=\"currentFilter = 'urgent'\"\n      >紧急</text>\n      <text \n        class=\"filter-item\" \n        :class=\"{ active: currentFilter === 'normal' }\" \n        @click=\"currentFilter = 'normal'\"\n      >一般</text>\n    </view>\n\n    <scroll-view scroll-y class=\"alert-list\">\n      <view class=\"alert-card\" v-for=\"(alert, index) in filteredAlerts\" :key=\"alert.id\">\n        <view class=\"card-header\">\n          <view class=\"header-left\">\n            <view class=\"type-tag\" :class=\"alert.typeClass\">{{ alert.typeText }}</view>\n            <text class=\"student-name\">{{ alert.studentName }}</text>\n            <text class=\"student-id\">{{ alert.studentId }}</text>\n          </view>\n          <text class=\"time\">{{ alert.time }}</text>\n        </view>\n\n        <view class=\"card-body\">\n          <view class=\"data-row\">\n            <text class=\"label\">异常数据：</text>\n            <text class=\"value highlight\">{{ alert.value }}</text>\n            <text class=\"standard\">（标准范围：{{ alert.standard }}）</text>\n          </view>\n          <view class=\"desc-box\">\n            <text class=\"desc-title\">异常说明：</text>\n            <text class=\"desc-content\">{{ alert.description }}</text>\n          </view>\n        </view>\n\n        <view class=\"card-footer\">\n          <button class=\"action-btn ignore\" size=\"mini\" @click=\"ignoreAlert(alert.id)\">忽略</button>\n          <button class=\"action-btn notify\" size=\"mini\" @click=\"notifyStudent(alert)\">通知学生</button>\n          <button class=\"action-btn handle\" size=\"mini\" @click=\"handleAlert(alert)\">处理</button>\n        </view>\n      </view>\n\n      <view v-if=\"filteredAlerts.length === 0\" class=\"empty-state\">\n        <text class=\"empty-text\">暂无异常数据</text>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue';\n\nconst currentFilter = ref('all');\n\nconst alerts = ref([\n  {\n    id: 1,\n    type: 'heart_rate',\n    typeText: '心率过高',\n    typeClass: 'tag-red',\n    studentName: '张三',\n    studentId: '2023001',\n    time: '10:30',\n    value: '195 bpm',\n    standard: '60-180 bpm',\n    description: '跑步过程中持续3分钟心率超过安全阈值，建议暂停训练并检查身体状况。',\n    level: 'urgent'\n  },\n  {\n    id: 2,\n    type: 'pace',\n    typeText: '配速异常',\n    typeClass: 'tag-orange',\n    studentName: '李四',\n    studentId: '2023002',\n    time: '10:45',\n    value: '2\\'30\"/km',\n    standard: '4\\'00\"-8\\'00\"/km',\n    description: '短时间内配速极快，疑似骑车或数据漂移。',\n    level: 'normal'\n  },\n  {\n    id: 3,\n    type: 'location',\n    typeText: '轨迹异常',\n    typeClass: 'tag-blue',\n    studentName: '王五',\n    studentId: '2023003',\n    time: '09:15',\n    value: '直线穿越',\n    standard: '连续轨迹',\n    description: '轨迹点之间距离过大，且无中间路径，疑似GPS信号丢失或作弊。',\n    level: 'normal'\n  }\n]);\n\nconst pendingCount = computed(() => alerts.value.length);\nconst todayCount = ref(5); // Mock data\n\nconst filteredAlerts = computed(() => {\n  if (currentFilter.value === 'all') return alerts.value;\n  return alerts.value.filter(a => a.level === currentFilter.value);\n});\n\nconst ignoreAlert = (id) => {\n  uni.showModal({\n    title: '确认忽略',\n    content: '忽略后该异常将不再提醒，确认操作？',\n    success: (res) => {\n      if (res.confirm) {\n        alerts.value = alerts.value.filter(a => a.id !== id);\n        uni.showToast({ title: '已忽略', icon: 'none' });\n      }\n    }\n  });\n};\n\nconst notifyStudent = (alert) => {\n  uni.showToast({\n    title: `已发送通知给 ${alert.studentName}`,\n    icon: 'success'\n  });\n};\n\nconst handleAlert = (alert) => {\n  uni.showActionSheet({\n    itemList: ['标记为无效成绩', '标记为设备故障', '要求重测'],\n    success: (res) => {\n      const actions = ['无效成绩', '设备故障', '重测'];\n      uni.showToast({\n        title: `已标记为：${actions[res.tapIndex]}`,\n        icon: 'success'\n      });\n      alerts.value = alerts.value.filter(a => a.id !== alert.id);\n    }\n  });\n};\n</script>\n\n<style lang=\"scss\">\n.container {\n  min-height: 100vh;\n  background-color: #f5f7fa;\n  padding: 20rpx;\n}\n\n.header {\n  background: #fff;\n  padding: 30rpx;\n  border-radius: 16rpx;\n  margin-bottom: 20rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);\n\n  .page-title {\n    font-size: 36rpx;\n    font-weight: bold;\n    color: #333;\n  }\n\n  .stats-row {\n    display: flex;\n    gap: 40rpx;\n\n    .stat-item {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n\n      .stat-num {\n        font-size: 32rpx;\n        font-weight: bold;\n        color: #ff6b6b;\n      }\n\n      .stat-desc {\n        font-size: 22rpx;\n        color: #999;\n      }\n    }\n  }\n}\n\n.filter-bar {\n  display: flex;\n  margin-bottom: 20rpx;\n  background: #fff;\n  padding: 10rpx;\n  border-radius: 12rpx;\n\n  .filter-item {\n    flex: 1;\n    text-align: center;\n    padding: 16rpx 0;\n    font-size: 28rpx;\n    color: #666;\n    border-radius: 8rpx;\n    transition: all 0.3s;\n\n    &.active {\n      background: #e6f7ff;\n      color: #1890ff;\n      font-weight: 500;\n    }\n  }\n}\n\n.alert-list {\n  padding-bottom: 40rpx;\n}\n\n.alert-card {\n  background: #fff;\n  border-radius: 16rpx;\n  padding: 30rpx;\n  margin-bottom: 20rpx;\n  box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);\n\n  .card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 24rpx;\n    padding-bottom: 20rpx;\n    border-bottom: 1px solid #f0f0f0;\n\n    .header-left {\n      display: flex;\n      align-items: center;\n      gap: 16rpx;\n\n      .type-tag {\n        font-size: 22rpx;\n        padding: 4rpx 12rpx;\n        border-radius: 6rpx;\n        color: #fff;\n\n        &.tag-red { background: #ff4d4f; }\n        &.tag-orange { background: #faad14; }\n        &.tag-blue { background: #1890ff; }\n      }\n\n      .student-name {\n        font-size: 30rpx;\n        font-weight: 500;\n        color: #333;\n      }\n\n      .student-id {\n        font-size: 24rpx;\n        color: #999;\n      }\n    }\n\n    .time {\n      font-size: 24rpx;\n      color: #999;\n    }\n  }\n\n  .card-body {\n    margin-bottom: 24rpx;\n\n    .data-row {\n      margin-bottom: 16rpx;\n      font-size: 28rpx;\n      \n      .label { color: #666; }\n      .value { \n        color: #333; \n        font-weight: 500; \n        &.highlight { color: #ff4d4f; }\n      }\n      .standard { color: #999; font-size: 24rpx; }\n    }\n\n    .desc-box {\n      background: #f9f9f9;\n      padding: 16rpx;\n      border-radius: 8rpx;\n\n      .desc-title {\n        font-size: 26rpx;\n        color: #333;\n        font-weight: 500;\n        display: block;\n        margin-bottom: 8rpx;\n      }\n\n      .desc-content {\n        font-size: 26rpx;\n        color: #666;\n        line-height: 1.5;\n      }\n    }\n  }\n\n  .card-footer {\n    display: flex;\n    justify-content: flex-end;\n    gap: 20rpx;\n\n    .action-btn {\n      margin: 0;\n      font-size: 24rpx;\n      padding: 0 30rpx;\n      border-radius: 30rpx;\n      background: #fff;\n      \n      &.ignore {\n        color: #999;\n        border: 1px solid #ddd;\n      }\n\n      &.notify {\n        color: #1890ff;\n        border: 1px solid #1890ff;\n      }\n\n      &.handle {\n        background: #20C997;\n        color: #fff;\n        border: none;\n      }\n    }\n  }\n}\n\n.empty-state {\n  padding: 60rpx;\n  text-align: center;\n  color: #999;\n  font-size: 28rpx;\n}\n</style>\n","import MiniProgramPage from 'D:/PC/Document/HBuilderProjects/campus-system/fronted/pages/teacher/exceptions/exceptions.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","MiniProgramPage"],"mappings":";;;;;AA0EA,UAAM,gBAAgBA,cAAAA,IAAI,KAAK;AAE/B,UAAM,SAASA,cAAAA,IAAI;AAAA,MACjB;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,UAAU;AAAA,QACV,WAAW;AAAA,QACX,aAAa;AAAA,QACb,WAAW;AAAA,QACX,MAAM;AAAA,QACN,OAAO;AAAA,QACP,UAAU;AAAA,QACV,aAAa;AAAA,QACb,OAAO;AAAA,MACR;AAAA,MACD;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,UAAU;AAAA,QACV,WAAW;AAAA,QACX,aAAa;AAAA,QACb,WAAW;AAAA,QACX,MAAM;AAAA,QACN,OAAO;AAAA,QACP,UAAU;AAAA,QACV,aAAa;AAAA,QACb,OAAO;AAAA,MACR;AAAA,MACD;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,UAAU;AAAA,QACV,WAAW;AAAA,QACX,aAAa;AAAA,QACb,WAAW;AAAA,QACX,MAAM;AAAA,QACN,OAAO;AAAA,QACP,UAAU;AAAA,QACV,aAAa;AAAA,QACb,OAAO;AAAA,MACR;AAAA,IACH,CAAC;AAED,UAAM,eAAeC,cAAAA,SAAS,MAAM,OAAO,MAAM,MAAM;AACvD,UAAM,aAAaD,cAAAA,IAAI,CAAC;AAExB,UAAM,iBAAiBC,cAAQ,SAAC,MAAM;AACpC,UAAI,cAAc,UAAU;AAAO,eAAO,OAAO;AACjD,aAAO,OAAO,MAAM,OAAO,OAAK,EAAE,UAAU,cAAc,KAAK;AAAA,IACjE,CAAC;AAED,UAAM,cAAc,CAAC,OAAO;AAC1BC,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,mBAAO,QAAQ,OAAO,MAAM,OAAO,OAAK,EAAE,OAAO,EAAE;AACnDA,0BAAG,MAAC,UAAU,EAAE,OAAO,OAAO,MAAM,OAAM,CAAE;AAAA,UAC7C;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAEA,UAAM,gBAAgB,CAAC,UAAU;AAC/BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO,UAAU,MAAM,WAAW;AAAA,QAClC,MAAM;AAAA,MACV,CAAG;AAAA,IACH;AAEA,UAAM,cAAc,CAAC,UAAU;AAC7BA,oBAAAA,MAAI,gBAAgB;AAAA,QAClB,UAAU,CAAC,WAAW,WAAW,MAAM;AAAA,QACvC,SAAS,CAAC,QAAQ;AAChB,gBAAM,UAAU,CAAC,QAAQ,QAAQ,IAAI;AACrCA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,QAAQ,QAAQ,IAAI,QAAQ,CAAC;AAAA,YACpC,MAAM;AAAA,UACd,CAAO;AACD,iBAAO,QAAQ,OAAO,MAAM,OAAO,OAAK,EAAE,OAAO,MAAM,EAAE;AAAA,QAC1D;AAAA,MACL,CAAG;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7JA,GAAG,WAAWC,SAAe;"}