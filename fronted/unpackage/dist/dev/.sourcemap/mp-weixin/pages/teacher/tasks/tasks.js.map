{"version":3,"file":"tasks.js","sources":["pages/teacher/tasks/tasks.vue","E:/HBuilderX/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdGVhY2hlci90YXNrcy90YXNrcy52dWU"],"sourcesContent":["<template>\n  <view class=\"tasks-page\">\n    <!-- Header Area with Stats -->\n    <view class=\"dashboard-header\">\n      <view class=\"header-top\">\n        <text class=\"page-title\">‰ªªÂä°ÁÆ°ÁêÜ</text>\n        <view class=\"header-actions\">\n          <view class=\"icon-btn search\">\n            <text class=\"iconfont\">üîç</text>\n          </view>\n        </view>\n      </view>\n      \n      <view class=\"stats-card\">\n        <view class=\"stat-item\">\n          <text class=\"stat-num\">{{ ongoingCount }}</text>\n          <text class=\"stat-label\">ËøõË°å‰∏≠</text>\n        </view>\n        <view class=\"stat-divider\"></view>\n        <view class=\"stat-item\">\n          <text class=\"stat-num\">{{ avgCompletion }}%</text>\n          <text class=\"stat-label\">Âπ≥ÂùáÂÆåÊàêÁéá</text>\n        </view>\n        <view class=\"stat-divider\"></view>\n        <view class=\"stat-item\">\n          <text class=\"stat-num\">{{ totalTasks }}</text>\n          <text class=\"stat-label\">Á¥ØËÆ°‰ªªÂä°</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- Tab Filter -->\n    <view class=\"tab-container\">\n      <view \n        class=\"tab-item\" \n        :class=\"{ active: currentTab === 0 }\" \n        @click=\"currentTab = 0\"\n      >\n        ËøõË°å‰∏≠\n        <view class=\"tab-line\" v-if=\"currentTab === 0\"></view>\n      </view>\n      <view \n        class=\"tab-item\" \n        :class=\"{ active: currentTab === 1 }\" \n        @click=\"currentTab = 1\"\n      >\n        ÂéÜÂè≤ËÆ∞ÂΩï\n        <view class=\"tab-line\" v-if=\"currentTab === 1\"></view>\n      </view>\n    </view>\n\n    <!-- Task List -->\n    <scroll-view scroll-y class=\"task-list\" :style=\"{height: 'calc(100vh - 380rpx)'}\">\n      <view class=\"task-card\" v-for=\"(task, index) in filteredTasks\" :key=\"index\" @click=\"goToDetail(task)\">\n        <view class=\"card-header\">\n          <view class=\"tag-row\">\n            <view class=\"type-tag\" :class=\"getTypeClass(task.type)\">{{ task.type }}</view>\n            <view class=\"deadline-tag\" :class=\"{ urgent: isUrgent(task.deadline) }\">\n              üìÖ {{ task.deadline }} Êà™Ê≠¢\n            </view>\n          </view>\n          <view class=\"more-btn\">...</view>\n        </view>\n\n        <view class=\"card-content\">\n          <text class=\"task-title\">{{ task.title }}</text>\n          <text class=\"task-desc\">{{ task.desc }}</text>\n        </view>\n\n        <view class=\"card-progress\">\n          <view class=\"progress-info\">\n            <text class=\"info-text\">ÂÆåÊàêÂ∫¶ <text class=\"highlight\">{{ task.percent }}%</text></text>\n            <text class=\"info-text sub\">{{ task.completed }}/{{ task.total }}‰∫∫</text>\n          </view>\n          <view class=\"progress-track\">\n            <view class=\"progress-bar\" :style=\"{ width: task.percent + '%' }\"></view>\n          </view>\n        </view>\n\n        <view class=\"card-footer\" @click.stop>\n          <view class=\"avatars\">\n             <!-- Mock avatars -->\n             <view class=\"avatar\" v-for=\"n in 3\" :key=\"n\" :style=\"{left: (n-1)*20 + 'rpx', zIndex: 4-n}\"></view>\n             <view class=\"avatar-more\" :style=\"{left: 60 + 'rpx'}\">...</view>\n          </view>\n          <button class=\"remind-btn\" size=\"mini\" @click=\"remindUnfinished(task)\" v-if=\"task.status === 'ËøõË°å‰∏≠'\">\n            üîî ‰∏ÄÈîÆÊèêÈÜí\n          </button>\n        </view>\n      </view>\n      \n      <view class=\"empty-state\" v-if=\"filteredTasks.length === 0\">\n        <text class=\"empty-text\">ÊöÇÊó†‰ªªÂä°Êï∞ÊçÆ</text>\n      </view>\n      \n      <!-- Bottom spacer for FAB -->\n      <view style=\"height: 120rpx;\"></view>\n    </scroll-view>\n\n    <!-- Floating Action Button -->\n    <view class=\"fab-btn\" @click=\"createTask\">\n      <text class=\"fab-icon\">+</text>\n      <text class=\"fab-text\">ÂèëÂ∏É‰ªªÂä°</text>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue';\n\nconst currentTab = ref(0);\n\nconst tasks = ref([\n  { \n    id: 1, \n    title: '3000Á±≥Êë∏Â∫ïÊµãËØï', \n    type: 'ËÄÉÊ†∏', \n    desc: 'ÂÖ®ÂëòÂøÖÈ°ªÂèÇÂä†ÔºåËÆ∞ÂΩïÊàêÁª©Ôºå‰Ωú‰∏∫ÊúüÊú´ËÄÉÊ†∏ÂèÇËÄÉ„ÄÇ',\n    status: 'ËøõË°å‰∏≠',\n    completed: 98,\n    total: 128,\n    percent: 76,\n    deadline: '2026-05-20'\n  },\n  { \n    id: 2, \n    title: 'Âë®Êú´Êô®Ë∑ëÊâìÂç°', \n    type: 'Êó•Â∏∏', \n    desc: '‰∏çÂ∞ë‰∫é3ÂÖ¨ÈáåÔºåÈÖçÈÄü‰∏ç‰Ωé‰∫é7ÂàÜÔºå‰øùÊåÅËâØÂ•ΩÁöÑ‰ΩìËÉΩÁä∂ÊÄÅ„ÄÇ',\n    status: 'ËøõË°å‰∏≠',\n    completed: 45,\n    total: 128,\n    percent: 35,\n    deadline: '2026-05-21'\n  },\n  { \n    id: 3, \n    title: 'Ê†∏ÂøÉÂäõÈáè‰∏ìÈ°πËÆ≠ÁªÉ', \n    type: 'ËÆ≠ÁªÉ', \n    desc: 'ÂÆåÊàê3ÁªÑÂπ≥ÊùøÊîØÊíëÔºåÊØèÁªÑ2ÂàÜÈíüÔºåÂº∫ÂåñÊ†∏ÂøÉËÇåÁæ§„ÄÇ',\n    status: 'Â∑≤ÁªìÊùü',\n    completed: 120,\n    total: 128,\n    percent: 93,\n    deadline: '2026-05-18'\n  },\n  {\n    id: 4,\n    title: '5ÂÖ¨ÈáåËÄêÂäõË∑ë',\n    type: 'ËÆ≠ÁªÉ',\n    desc: '‰∏∫‰∏ãÊúàËøêÂä®‰ºöÂÅöÂáÜÂ§áÔºåÊèêÂçáËÄêÂäõ„ÄÇ',\n    status: 'Â∑≤ÁªìÊùü',\n    completed: 110,\n    total: 128,\n    percent: 85,\n    deadline: '2026-05-15'\n  }\n]);\n\nconst ongoingCount = computed(() => tasks.value.filter(t => t.status === 'ËøõË°å‰∏≠').length);\nconst totalTasks = computed(() => tasks.value.length);\nconst avgCompletion = computed(() => {\n  if (tasks.value.length === 0) return 0;\n  const sum = tasks.value.reduce((acc, cur) => acc + cur.percent, 0);\n  return Math.round(sum / tasks.value.length);\n});\n\nconst filteredTasks = computed(() => {\n  if (currentTab.value === 0) {\n    return tasks.value.filter(t => t.status === 'ËøõË°å‰∏≠');\n  } else {\n    return tasks.value.filter(t => t.status !== 'ËøõË°å‰∏≠');\n  }\n});\n\nconst getTypeClass = (type) => {\n  const map = {\n    'ËÄÉÊ†∏': 'tag-red',\n    'Êó•Â∏∏': 'tag-green',\n    'ËÆ≠ÁªÉ': 'tag-blue'\n  };\n  return map[type] || 'tag-gray';\n};\n\nconst isUrgent = (deadline) => {\n  // Simple check: if deadline is \"close\" (mock logic)\n  return deadline === '2026-05-20'; \n};\n\nconst useTemplate = (tpl) => {\n  uni.navigateTo({\n    url: `/pages/teacher/tasks/create?template=${tpl.name}`\n  });\n};\n\nconst showTaskActions = (task) => {\n  uni.showActionSheet({\n    itemList: ['ÁºñËæë‰ªªÂä°', 'ÊèêÂâçÁªìÊùü', 'Âà†Èô§‰ªªÂä°'],\n    success: (res) => {\n      if (res.tapIndex === 0) {\n        uni.navigateTo({ url: `/pages/teacher/tasks/create?id=${task.id}` });\n      } else if (res.tapIndex === 2) {\n        uni.showModal({\n          title: 'Á°ÆËÆ§Âà†Èô§',\n          content: 'Âà†Èô§ÂêéÊó†Ê≥ïÊÅ¢Â§çÔºåÊòØÂê¶ÁªßÁª≠Ôºü',\n          success: (mRes) => {\n            if (mRes.confirm) {\n              const idx = tasks.value.findIndex(t => t.id === task.id);\n              if (idx > -1) tasks.value.splice(idx, 1);\n              uni.showToast({ title: 'Â∑≤Âà†Èô§', icon: 'none' });\n            }\n          }\n        });\n      } else {\n        uni.showToast({ title: 'Êìç‰ΩúÊàêÂäü', icon: 'success' });\n      }\n    }\n  });\n};\n\nconst createTask = () => {\n  uni.navigateTo({\n    url: '/pages/teacher/tasks/create'\n  });\n};\n\nconst goToDetail = (task) => {\n  uni.navigateTo({\n    url: `/pages/teacher/tasks/detail?id=${task.id}&title=${task.title}`\n  });\n};\n\nconst remindUnfinished = (task) => {\n  uni.showToast({ title: `Â∑≤ÂèëÈÄÅÊèêÈÜíÁªô${task.total - task.completed}ÂêçÊú™ÂÆåÊàêÂ≠¶Áîü`, icon: 'none' });\n};\n</script>\n\n<style scoped>\n.tasks-page {\n  min-height: 100vh;\n  background: #f5f7fa;\n  display: flex;\n  flex-direction: column;\n}\n\n.dashboard-header {\n  background: #20C997;\n  padding: 40rpx 30rpx 80rpx 30rpx; /* Extra bottom padding for overlap */\n  color: #fff;\n  border-bottom-left-radius: 40rpx;\n  border-bottom-right-radius: 40rpx;\n}\n\n.header-top {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30rpx;\n}\n\n.page-title {\n  font-size: 40rpx;\n  font-weight: bold;\n}\n\n.header-actions {\n  display: flex;\n  gap: 20rpx;\n}\n\n.icon-btn {\n  width: 70rpx;\n  height: 70rpx;\n  background: rgba(255,255,255,0.2);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.stats-card {\n  background: #fff;\n  border-radius: 20rpx;\n  padding: 30rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 8rpx 20rpx rgba(32, 201, 151, 0.2);\n  color: #333;\n}\n\n.stat-item {\n  flex: 1;\n  text-align: center;\n}\n\n.stat-num {\n  font-size: 36rpx;\n  font-weight: bold;\n  color: #333;\n  display: block;\n}\n\n.stat-label {\n  font-size: 24rpx;\n  color: #999;\n  margin-top: 8rpx;\n  display: block;\n}\n\n.stat-divider {\n  width: 2rpx;\n  height: 40rpx;\n  background: #eee;\n}\n\n/* Templates Section */\n.templates-section {\n  padding: 20rpx 30rpx 0;\n}\n.section-title {\n  font-size: 28rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 20rpx;\n}\n.template-scroll {\n  white-space: nowrap;\n  width: 100%;\n}\n.template-card {\n  display: inline-block;\n  width: 160rpx;\n  background: #fff;\n  border-radius: 16rpx;\n  padding: 20rpx;\n  margin-right: 20rpx;\n  text-align: center;\n  box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.02);\n}\n.tpl-icon {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 50%;\n  margin: 0 auto 16rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 40rpx;\n  color: #fff;\n}\n.tpl-name {\n  font-size: 24rpx;\n  color: #333;\n  display: block;\n}\n\n.tab-container {\n  display: flex;\n  background: transparent;\n  padding: 20rpx 60rpx;\n  margin-top: 10rpx;\n}\n\n.tab-item {\n  flex: 1;\n  text-align: center;\n  font-size: 30rpx;\n  color: #999;\n  padding-bottom: 16rpx;\n  position: relative;\n  transition: all 0.3s;\n}\n\n.tab-item.active {\n  color: #333;\n  font-weight: bold;\n  font-size: 32rpx;\n}\n\n.tab-line {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 40rpx;\n  height: 6rpx;\n  background: #20C997;\n  border-radius: 4rpx;\n}\n\n.task-list {\n  flex: 1;\n  padding: 20rpx 30rpx;\n  box-sizing: border-box;\n}\n\n.task-card {\n  background: #fff;\n  border-radius: 24rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.04);\n  position: relative;\n  overflow: hidden;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 20rpx;\n}\n\n.tag-row {\n  display: flex;\n  gap: 16rpx;\n}\n\n.type-tag {\n  font-size: 22rpx;\n  padding: 6rpx 16rpx;\n  border-radius: 30rpx;\n  color: #fff;\n}\n.tag-red { background: linear-gradient(135deg, #ff9a9e 0%, #ff6b6b 100%); }\n.tag-green { background: linear-gradient(135deg, #84fab0 0%, #20C997 100%); }\n.tag-blue { background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%); color: #446699; }\n.tag-gray { background: #eee; color: #999; }\n\n.deadline-tag {\n  font-size: 22rpx;\n  color: #999;\n  display: flex;\n  align-items: center;\n  background: #f8f8f8;\n  padding: 6rpx 16rpx;\n  border-radius: 30rpx;\n}\n\n.deadline-tag.urgent {\n  color: #ff6b6b;\n  background: #fff0f0;\n}\n\n.more-btn {\n  color: #ccc;\n  font-weight: bold;\n  letter-spacing: 2rpx;\n}\n\n.card-content {\n  margin-bottom: 30rpx;\n}\n\n.task-title {\n  font-size: 34rpx;\n  font-weight: bold;\n  color: #333;\n  display: block;\n  margin-bottom: 12rpx;\n}\n\n.task-desc {\n  font-size: 26rpx;\n  color: #888;\n  line-height: 1.5;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  overflow: hidden;\n}\n\n.card-progress {\n  margin-bottom: 30rpx;\n}\n\n.progress-info {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 12rpx;\n}\n\n.info-text {\n  font-size: 26rpx;\n  color: #666;\n}\n\n.info-text.sub {\n  color: #999;\n  font-size: 24rpx;\n}\n\n.highlight {\n  color: #20C997;\n  font-weight: bold;\n  margin-left: 8rpx;\n}\n\n.progress-track {\n  height: 12rpx;\n  background: #f0f0f0;\n  border-radius: 10rpx;\n  overflow: hidden;\n}\n\n.progress-bar {\n  height: 100%;\n  background: linear-gradient(90deg, #20C997, #4cd9b0);\n  border-radius: 10rpx;\n}\n\n.card-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 20rpx;\n  border-top: 1px solid #f5f5f5;\n}\n\n.avatars {\n  position: relative;\n  height: 50rpx;\n  width: 120rpx;\n}\n\n.avatar {\n  width: 50rpx;\n  height: 50rpx;\n  border-radius: 50%;\n  background: #ddd;\n  border: 2rpx solid #fff;\n  position: absolute;\n  top: 0;\n}\n.avatar:nth-child(1) { background-color: #ffd166; }\n.avatar:nth-child(2) { background-color: #06d6a0; }\n.avatar:nth-child(3) { background-color: #118ab2; }\n\n.avatar-more {\n  width: 50rpx;\n  height: 50rpx;\n  border-radius: 50%;\n  background: #f0f0f0;\n  color: #999;\n  font-size: 20rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2rpx solid #fff;\n  position: absolute;\n  top: 0;\n}\n\n.remind-btn {\n  margin: 0;\n  font-size: 24rpx;\n  background: #fff;\n  color: #20C997;\n  border: 1px solid #20C997;\n  border-radius: 30rpx;\n  padding: 0 24rpx;\n  line-height: 50rpx;\n}\n\n.empty-state {\n  text-align: center;\n  padding-top: 100rpx;\n}\n\n.empty-text {\n  color: #999;\n  font-size: 28rpx;\n}\n\n.fab-btn {\n  position: fixed;\n  bottom: 60rpx;\n  left: 50%;\n  transform: translateX(-50%);\n  background: #333;\n  color: #fff;\n  display: flex;\n  align-items: center;\n  padding: 20rpx 40rpx;\n  border-radius: 60rpx;\n  box-shadow: 0 10rpx 30rpx rgba(0,0,0,0.3);\n  z-index: 100;\n}\n\n.fab-icon {\n  font-size: 40rpx;\n  margin-right: 16rpx;\n  font-weight: 300;\n  margin-top: -4rpx;\n}\n\n.fab-text {\n  font-size: 30rpx;\n  font-weight: bold;\n}\n</style>","import MiniProgramPage from 'D:/PC/Document/HBuilderProjects/run-checkin/pages/teacher/tasks/tasks.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni"],"mappings":";;;;;AA8GA,UAAM,aAAaA,cAAAA,IAAI,CAAC;AAExB,UAAM,QAAQA,cAAAA,IAAI;AAAA,MAChB;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,MAAM;AAAA,QACN,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,WAAW;AAAA,QACX,OAAO;AAAA,QACP,SAAS;AAAA,QACT,UAAU;AAAA,MACX;AAAA,MACD;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,MAAM;AAAA,QACN,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,WAAW;AAAA,QACX,OAAO;AAAA,QACP,SAAS;AAAA,QACT,UAAU;AAAA,MACX;AAAA,MACD;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,MAAM;AAAA,QACN,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,WAAW;AAAA,QACX,OAAO;AAAA,QACP,SAAS;AAAA,QACT,UAAU;AAAA,MACX;AAAA,MACD;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,MAAM;AAAA,QACN,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,WAAW;AAAA,QACX,OAAO;AAAA,QACP,SAAS;AAAA,QACT,UAAU;AAAA,MACX;AAAA,IACH,CAAC;AAED,UAAM,eAAeC,cAAQ,SAAC,MAAM,MAAM,MAAM,OAAO,OAAK,EAAE,WAAW,KAAK,EAAE,MAAM;AACtF,UAAM,aAAaA,cAAAA,SAAS,MAAM,MAAM,MAAM,MAAM;AACpD,UAAM,gBAAgBA,cAAQ,SAAC,MAAM;AACnC,UAAI,MAAM,MAAM,WAAW;AAAG,eAAO;AACrC,YAAM,MAAM,MAAM,MAAM,OAAO,CAAC,KAAK,QAAQ,MAAM,IAAI,SAAS,CAAC;AACjE,aAAO,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM;AAAA,IAC5C,CAAC;AAED,UAAM,gBAAgBA,cAAQ,SAAC,MAAM;AACnC,UAAI,WAAW,UAAU,GAAG;AAC1B,eAAO,MAAM,MAAM,OAAO,OAAK,EAAE,WAAW,KAAK;AAAA,MACrD,OAAS;AACL,eAAO,MAAM,MAAM,OAAO,OAAK,EAAE,WAAW,KAAK;AAAA,MAClD;AAAA,IACH,CAAC;AAED,UAAM,eAAe,CAAC,SAAS;AAC7B,YAAM,MAAM;AAAA,QACV,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,MACV;AACE,aAAO,IAAI,IAAI,KAAK;AAAA,IACtB;AAEA,UAAM,WAAW,CAAC,aAAa;AAE7B,aAAO,aAAa;AAAA,IACtB;AAiCA,UAAM,aAAa,MAAM;AACvBC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAS;AAC3BA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,kCAAkC,KAAK,EAAE,UAAU,KAAK,KAAK;AAAA,MACtE,CAAG;AAAA,IACH;AAEA,UAAM,mBAAmB,CAAC,SAAS;AACjCA,oBAAAA,MAAI,UAAU,EAAE,OAAO,SAAS,KAAK,QAAQ,KAAK,SAAS,UAAU,MAAM,OAAQ,CAAA;AAAA,IACrF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzOA,GAAG,WAAW,eAAe;"}