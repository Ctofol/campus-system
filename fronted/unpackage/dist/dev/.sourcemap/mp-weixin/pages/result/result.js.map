{"version":3,"file":"result.js","sources":["pages/result/result.vue","E:/HBuilderX/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVzdWx0L3Jlc3VsdC52dWU"],"sourcesContent":["<template>\n  <view class=\"result-page\">\n    <!-- é¡¶éƒ¨æ¨¡å¼æ ‡é¢˜ -->\n    <view class=\"mode-header\" :style=\"{backgroundColor: modeBgColor}\">\n      <text class=\"mode-title\">{{modeTitle}}</text>\n    </view>\n\n    <!-- æ ¸å¿ƒæ•°æ®å¡ç‰‡ -->\n    <view class=\"result-card\">\n      <!-- ä½“èƒ½æµ‹è¯•æ¨¡å¼ï¼šä¸æ˜¾ç¤ºé€šç”¨çš„è¿åŠ¨æ—¶é•¿/è·ç¦»ï¼Œè€Œæ˜¯æ˜¾ç¤ºé¡¹ç›®ä¸“å±æ•°æ® -->\n      <view class=\"base-data\" v-if=\"currentMode === 'test'\">\n        <text class=\"base-title\">æµ‹è¯•é¡¹ç›®ï¼š{{ testProject }}</text>\n        <view class=\"data-item\">\n          <text class=\"item-label\">å®Œæˆæ•°é‡</text>\n          <text class=\"item-value count-text\">{{ testCount }} æ¬¡</text>\n        </view>\n        <view class=\"data-item\">\n          <text class=\"item-label\">æµ‹è¯•ç”¨æ—¶</text>\n          <text class=\"item-value\">{{ formatDuration(duration) }}</text>\n        </view>\n        <view class=\"data-item\">\n          <text class=\"item-label\">åŠ¨ä½œåˆ¤å®š</text>\n          <text class=\"item-value\" :class=\"testQualified ? 'success' : 'fail'\">{{ testQualified ? 'âœ… åˆæ ¼' : 'âŒ æœªåˆæ ¼' }}</text>\n        </view>\n      </view>\n\n      <!-- Test Mode Analysis Section -->\n      <view class=\"mode-data\" v-if=\"currentMode === 'test'\">\n        <text class=\"mode-data-title\">æˆç»©åˆ†æ</text>\n        <view class=\"bar-chart\">\n          <view class=\"bar-row\">\n            <text class=\"bar-label\">æˆ‘çš„</text>\n            <view class=\"bar-track\">\n              <view class=\"bar-fill user-fill\" :style=\"{width: userScorePercent + '%'}\"></view>\n              <text class=\"bar-val-in\" v-if=\"userScorePercent > 15\">{{testCount}}</text>\n            </view>\n            <text class=\"bar-val-out\" v-if=\"userScorePercent <= 15\">{{testCount}}</text>\n          </view>\n          <view class=\"bar-row\">\n            <text class=\"bar-label\">åˆæ ¼</text>\n            <view class=\"bar-track\">\n              <view class=\"bar-fill standard-fill\" :style=\"{width: standardScorePercent + '%'}\"></view>\n              <text class=\"bar-val-in\" v-if=\"standardScorePercent > 15\">{{standardReq}}</text>\n            </view>\n            <text class=\"bar-val-out\" v-if=\"standardScorePercent <= 15\">{{standardReq}}</text>\n          </view>\n        </view>\n        \n        <view class=\"suggestion-box\">\n          <text class=\"sugg-title\">ğŸ’¡ æ™ºèƒ½åé¦ˆ</text>\n          <text class=\"sugg-text\">{{suggestionText}}</text>\n        </view>\n      </view>\n\n      <!-- é€šç”¨åŸºç¡€æ•°æ®ï¼ˆéæµ‹è¯•æ¨¡å¼æ˜¾ç¤ºï¼‰ -->\n      <view class=\"base-data\" v-else>\n        <text class=\"base-title\">è¿åŠ¨åŸºç¡€æ•°æ®</text>\n        <view class=\"data-item\">\n          <text class=\"item-label\">è¿åŠ¨æ—¶é•¿</text>\n          <text class=\"item-value\">{{formatDuration(duration)}}</text>\n        </view>\n        <view class=\"data-item\">\n          <text class=\"item-label\">è¿åŠ¨è·ç¦»</text>\n          <text class=\"item-value\">{{(distance/1000).toFixed(2)}} å…¬é‡Œ</text>\n        </view>\n      </view>\n\n      <!-- æ¨¡å¼ä¸“å±æ•°æ® -->\n      <view class=\"mode-data\" v-if=\"currentMode === 'police'\">\n        <text class=\"mode-data-title\">ä¸“é¡¹ä½“èƒ½æµ‹è¯•æ•°æ®</text>\n        <!-- 2000ç±³å®ŒæˆçŠ¶æ€ -->\n        <view class=\"data-item\">\n          <text class=\"item-label\">2000ç±³ç›®æ ‡å®Œæˆ</text>\n          <text class=\"item-value\" :class=\"isPoliceFinish ? 'success' : 'fail'\">\n            {{isPoliceFinish ? 'âœ… å·²å®Œæˆ' : 'âŒ æœªå®Œæˆ'}}\n          </text>\n        </view>\n        <!-- é…é€Ÿè¾¾æ ‡çŠ¶æ€ -->\n        <view class=\"data-item\">\n          <text class=\"item-label\">é…é€Ÿæ˜¯å¦è¾¾æ ‡</text>\n          <text class=\"item-value\" :class=\"isPaceQualified ? 'success' : 'fail'\">\n            {{isPaceQualified ? `âœ… è¾¾æ ‡ï¼ˆ${policePace.toFixed(1)} åˆ†/å…¬é‡Œï¼‰` : `âŒ æœªè¾¾æ ‡ï¼ˆ${policePace.toFixed(1)} åˆ†/å…¬é‡Œï¼‰`}}\n          </text>\n        </view>\n        <!-- è€ƒæ ¸æ ‡å‡†å‚è€ƒ -->\n        <view class=\"data-item tips\">\n          <text class=\"item-label\">å‚è€ƒæ ‡å‡†</text>\n          <text class=\"item-value\">å¯æ ¹æ®å­¦æ ¡æˆ–è¯¾ç¨‹ä½“æµ‹æ ‡å‡†é…ç½®</text>\n        </view>\n      </view>\n\n      <view class=\"mode-data\" v-if=\"currentMode === 'campus'\">\n        <text class=\"mode-data-title\">æ ¡å›­æ‰“å¡æ•°æ®</text>\n        <view class=\"data-item\">\n          <text class=\"item-label\">æ‰“å¡ç‚¹åˆ°è¾¾çŠ¶æ€</text>\n          <text class=\"item-value\" :class=\"isReach ? 'success' : 'fail'\">\n            {{isReach ? 'âœ… å·²åˆ°è¾¾' : 'âŒ æœªåˆ°è¾¾'}}\n          </text>\n        </view>\n      </view>\n\n      <view class=\"mode-data\" v-if=\"currentMode === 'normal'\">\n        <text class=\"mode-data-title\">æ™®é€šè·‘æ­¥æ•°æ®</text>\n        <view class=\"data-item tips\">\n          <text class=\"item-label\">æ¸©é¦¨æç¤º</text>\n          <text class=\"item-value\">æ•°æ®å·²è‡ªåŠ¨è®°å½•ï¼Œå¯åœ¨ã€Œæˆ‘çš„ã€é¡µé¢æŸ¥çœ‹æ±‡æ€»</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- æ“ä½œæŒ‰é’®åŒº -->\n    <view class=\"btn-group\">\n      <button class=\"save-btn\" disabled>\n        âœ… æ•°æ®å·²ä¿å­˜\n      </button>\n      <button @click=\"backToHome\" class=\"back-btn\">è¿”å›é¦–é¡µ</button>\n    </view>\n  </view>\n</template>\n\n<script setup>\n// ç»Ÿä¸€å¯¼å…¥è§„èŒƒ\nimport { ref, computed} from 'vue';\nimport { onShow, onLoad  } from '@dcloudio/uni-app';\n\n// 1. æ¥æ”¶è·‘æ­¥é¡µä¼ é€’çš„å‚æ•°\nconst currentMode = ref('normal'); // normal/police/campus\nconst duration = ref(0); // è¿åŠ¨æ—¶é•¿ï¼ˆç§’ï¼‰\nconst distance = ref(0); // è¿åŠ¨è·ç¦»ï¼ˆç±³ï¼‰\nconst isReach = ref(false); // æ ¡å›­æ‰“å¡æ˜¯å¦åˆ°è¾¾\nconst isPoliceFinish = ref(false); // è­¦åŠ¡2000ç±³æ˜¯å¦å®Œæˆ\nconst policePace = ref(0); // è­¦åŠ¡é…é€Ÿï¼ˆåˆ†/å…¬é‡Œï¼‰\n// æµ‹è¯•æ¨¡å¼ä¸“å±\nconst testProject = ref('');\nconst testType = ref('');\nconst testCount = ref(0);\nconst testQualified = ref(false);\nconst standardReq = ref(0);\nconst userScorePercent = ref(0);\nconst standardScorePercent = ref(0);\nconst suggestionText = ref('');\n\n// 3. è®¡ç®—å±æ€§ï¼šåŠ¨æ€æ ‡é¢˜å’ŒèƒŒæ™¯è‰²\nconst modeTitle = computed(() => {\n  switch (currentMode.value) {\n    case 'police': return 'ğŸ¯ 2000ç±³ä¸“é¡¹ä½“èƒ½ç»“ç®—';\n    case 'campus': return 'ğŸ« æ ¡å›­æ‰“å¡è·‘æ­¥ç»“ç®—';\n    case 'test': return 'ğŸ’ª ä½“èƒ½æµ‹è¯•ç»“ç®—';\n    default: return 'ğŸƒ æ™®é€šè·‘æ­¥ç»“ç®—';\n  }\n});\nconst modeBgColor = computed(() => {\n  switch (currentMode.value) {\n    case 'police': return '#fdf2f0';\n    case 'campus': return '#e8f4f8';\n    case 'test': return '#f3f7ff';\n    default: return '#f5f5f5';\n  }\n});\n// è­¦åŠ¡é…é€Ÿæ˜¯å¦è¾¾æ ‡ï¼ˆç”·ç”Ÿ6.5ï¼Œå¥³ç”Ÿ7.5ï¼Œè¿™é‡Œé»˜è®¤æŒ‰ç”·ç”Ÿæ ‡å‡†ï¼‰\nconst isPaceQualified = computed(() => {\n  return policePace.value <= 6.5;\n});\n\n// 4. é¡µé¢åŠ è½½æ—¶æ¥æ”¶å‚æ•°\nonLoad((options) => {\n  if (options.data) {\n    try {\n      const data = JSON.parse(decodeURIComponent(options.data));\n      // Map backend data to frontend display\n      currentMode.value = data.type === 'test' ? 'test' : 'normal'; // Simplify for MVP\n      if (data.metrics) {\n        duration.value = data.metrics.duration || 0;\n        distance.value = (data.metrics.distance || 0) * 1000;\n        testCount.value = data.metrics.count || 0;\n        testQualified.value = data.metrics.qualified;\n        policePace.value = Number(data.metrics.pace) || 0;\n      }\n      \n      // Additional logic for test mode visualization (simplified)\n      if (currentMode.value === 'test') {\n        testProject.value = 'ä½“æµ‹é¡¹ç›®'; // Since we don't track specific project name in backend yet, generic\n        testQualified.value = data.metrics.qualified;\n        if (testQualified.value) {\n          suggestionText.value = 'æ­å–œè¾¾æ ‡ï¼';\n        } else {\n          suggestionText.value = 'ç»§ç»­åŠ æ²¹ï¼';\n        }\n      }\n    } catch (e) {\n      console.error('Failed to parse result data', e);\n    }\n  } else {\n    // Fallback to legacy query params\n    currentMode.value = options.mode || 'normal';\n    duration.value = Number(options.duration) || 0;\n    distance.value = Number(options.distance) || 0;\n    isReach.value = options.isReach === 'true';\n    isPoliceFinish.value = options.isPoliceFinish === 'true';\n    policePace.value = Number(options.policePace) || 0;\n  }\n});\n\n// 5. æ ¼å¼åŒ–æ—¶é•¿ï¼ˆç§’ â†’ åˆ†:ç§’ï¼‰\nconst formatDuration = (seconds) => {\n  const min = Math.floor(seconds / 60);\n  const sec = seconds % 60;\n  return `${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;\n};\n\n// 7. è¿”å›é¦–é¡µ\nconst backToHome = () => {\n  uni.reLaunch({ url: '/pages/home/home' });\n};\n</script>\n\n<style scoped>\n.result-page {\n  min-height: 100vh;\n  background-color: #fff;\n}\n\n/* é¡¶éƒ¨æ¨¡å¼æ ‡é¢˜æ  */\n.mode-header {\n  padding: 30rpx 20rpx;\n  text-align: center;\n  border-bottom: 1px solid #eee;\n}\n.mode-title {\n  font-size: 36rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n/* æ ¸å¿ƒæ•°æ®å¡ç‰‡ */\n.result-card {\n  margin: 20rpx;\n  padding: 30rpx;\n  background-color: #fafafa;\n  border-radius: 16rpx;\n}\n/* åŸºç¡€æ•°æ®æ¨¡å— */\n.base-data {\n  margin-bottom: 30rpx;\n  padding-bottom: 20rpx;\n  border-bottom: 1px dashed #ddd;\n}\n.base-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 20rpx;\n  display: block;\n}\n/* æ•°æ®é¡¹é€šç”¨æ ·å¼ */\n.data-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15rpx 0;\n  font-size: 30rpx;\n}\n.item-label {\n  color: #666;\n  font-size: 28rpx;\n}\n.item-value {\n  font-weight: bold;\n  color: #333;\n  font-size: 28rpx;\n}\n.count-text {\n  font-size: 40rpx;\n  color: #20C997;\n}\n\n/* æ¨¡å¼ä¸“å±æ•°æ®æ¨¡å— */\n.mode-data {\n  margin-top: 20rpx;\n}\n.mode-data-title {\n  font-size: 30rpx;\n  font-weight: bold;\n  color: #444;\n  margin-bottom: 15rpx;\n  display: block;\n}\n/* çŠ¶æ€æ ·å¼ */\n.success {\n  color: #20C997 !important;\n}\n.fail {\n  color: #d81e06 !important;\n}\n.tips .item-value {\n  font-weight: normal;\n  color: #888;\n  font-size: 26rpx;\n}\n\n/* å›¾è¡¨ä¸å»ºè®® */\n.bar-chart {\n  margin: 20rpx 0;\n}\n.bar-row {\n  display: flex;\n  align-items: center;\n  margin-bottom: 16rpx;\n}\n.bar-label {\n  width: 80rpx;\n  font-size: 26rpx;\n  color: #666;\n}\n.bar-track {\n  flex: 1;\n  height: 40rpx;\n  background: #f0f0f0;\n  border-radius: 20rpx;\n  overflow: hidden;\n  position: relative;\n  margin-right: 10rpx;\n}\n.bar-fill {\n  height: 100%;\n  border-radius: 20rpx;\n}\n.user-fill { background: #20C997; }\n.standard-fill { background: #ddd; }\n\n.bar-val-in {\n  position: absolute;\n  right: 10rpx;\n  top: 0;\n  line-height: 40rpx;\n  font-size: 22rpx;\n  color: #fff;\n}\n.bar-val-out {\n  font-size: 26rpx;\n  color: #333;\n}\n\n.suggestion-box {\n  background: #eefbf7;\n  padding: 20rpx;\n  border-radius: 12rpx;\n  margin-top: 20rpx;\n  border: 1px solid #d2f4e8;\n}\n.sugg-title {\n  font-size: 28rpx;\n  font-weight: bold;\n  color: #17a077;\n  display: block;\n  margin-bottom: 8rpx;\n}\n.sugg-text {\n  font-size: 26rpx;\n  color: #555;\n  line-height: 1.4;\n}\n\n/* æ“ä½œæŒ‰é’®åŒº */\n.btn-group {\n  margin: 20rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n}\n.save-btn {\n  height: 80rpx;\n  line-height: 80rpx;\n  background-color: #20C997;\n  color: #fff;\n  border: none;\n  border-radius: 12rpx;\n  font-size: 32rpx;\n}\n.save-btn:disabled {\n  background-color: #95e1c8;\n  color: #fff;\n}\n.back-btn {\n  height: 80rpx;\n  line-height: 80rpx;\n  background-color: #f5f5f5;\n  color: #333;\n  border: 1px solid #eee;\n  border-radius: 12rpx;\n  font-size: 32rpx;\n}\n</style>\n","import MiniProgramPage from 'D:/PC/Document/HBuilderProjects/campus-system/fronted/pages/result/result.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","onLoad","uni"],"mappings":"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"}