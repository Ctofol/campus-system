{"version":3,"file":"ai-chat-robot.js","sources":["components/ai-chat-robot/ai-chat-robot.vue","E:/HBuilderX/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovUEMvRG9jdW1lbnQvSEJ1aWxkZXJQcm9qZWN0cy9ydW4tY2hlY2tpbi9jb21wb25lbnRzL2FpLWNoYXQtcm9ib3QvYWktY2hhdC1yb2JvdC52dWU"],"sourcesContent":["<template>\n  <view class=\"ai-robot-container\" v-if=\"visible\">\n    <view class=\"robot-mask\" @click=\"close\"></view>\n    <view class=\"robot-window\">\n      <!-- Header -->\n      <view class=\"robot-header\">\n        <view class=\"header-left\">\n          <view class=\"robot-avatar\">ü§ñ</view>\n          <view class=\"robot-info\">\n            <text class=\"robot-name\">ËøêÂä®Â∞èÂä©Êâã</text>\n            <text class=\"robot-status\">Âú®Á∫øÂàÜÊûê‰∏≠...</text>\n          </view>\n        </view>\n        <view class=\"header-right\">\n          <text class=\"close-btn\" @click=\"close\">√ó</text>\n        </view>\n      </view>\n\n      <!-- Chat Area -->\n      <scroll-view scroll-y class=\"chat-area\" :scroll-top=\"scrollTop\">\n        <view class=\"message-list\">\n          <view v-for=\"(msg, index) in messages\" :key=\"index\" class=\"message-item\" :class=\"msg.type\">\n            <view class=\"msg-avatar\" v-if=\"msg.type === 'robot'\">ü§ñ</view>\n            <view class=\"msg-content-box\">\n              <view class=\"msg-content\">\n                <text>{{ msg.text }}</text>\n              </view>\n              <!-- Card Content for Robot -->\n              <view v-if=\"msg.card\" class=\"msg-card\">\n                <view class=\"card-title\">{{ msg.card.title }}</view>\n                <view class=\"card-chart\" v-if=\"msg.card.chartData\">\n                  <view class=\"chart-bar-item\" v-for=\"(item, idx) in msg.card.chartData\" :key=\"idx\">\n                    <text class=\"bar-label\">{{ item.label }}</text>\n                    <view class=\"bar-track\">\n                      <view class=\"bar-fill\" :style=\"{ width: item.value + '%', background: item.color }\"></view>\n                    </view>\n                    <text class=\"bar-val\">{{ item.valText }}</text>\n                  </view>\n                </view>\n                <view class=\"card-suggestion\" v-if=\"msg.card.suggestion\">\n                  <text class=\"suggestion-icon\">üí°</text>\n                  <text>{{ msg.card.suggestion }}</text>\n                </view>\n                <button v-if=\"msg.card.shareable\" class=\"share-btn\" size=\"mini\" @click=\"shareToTeacher(msg.card)\">ÂàÜ‰∫´ÁªôÊïôÂÆò</button>\n              </view>\n            </view>\n            <view class=\"msg-avatar\" v-if=\"msg.type === 'user'\">üë§</view>\n          </view>\n        </view>\n      </scroll-view>\n\n      <!-- Input Area -->\n      <view class=\"input-area\">\n        <scroll-view scroll-x class=\"quick-replies\" :show-scrollbar=\"false\">\n          <view class=\"chip\" @click=\"ask('ÊàëÁöÑÈÖçÈÄüÊÄé‰πàÊ†∑Ôºü')\">ÈÖçÈÄüÂàÜÊûê</view>\n          <view class=\"chip\" @click=\"ask('‰ªäÂ§©ËøêÂä®ÈáèÂ§üÂêóÔºü')\">ËøêÂä®ÈáèËØÑ‰º∞</view>\n          <view class=\"chip\" @click=\"ask('ÁªôÁÇπÂª∫ËÆÆ')\">ÊîπËøõÂª∫ËÆÆ</view>\n        </scroll-view>\n        <view class=\"input-box\">\n          <input class=\"text-input\" v-model=\"inputText\" placeholder=\"ËæìÂÖ•ÈóÆÈ¢ò...\" confirm-type=\"send\" @confirm=\"sendText\" />\n          <view class=\"send-btn\" @click=\"sendText\">ÂèëÈÄÅ</view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, watch, nextTick } from 'vue';\n\nconst props = defineProps({\n  visible: Boolean,\n  runData: {\n    type: Object,\n    default: () => ({ distance: 0, pace: 0, heartRate: 0 })\n  }\n});\n\nconst emit = defineEmits(['update:visible', 'share']);\n\nconst messages = ref([\n  { type: 'robot', text: '‰Ω†Â•ΩÔºÅÊàëÊòØ‰Ω†ÁöÑ‰∏ìÂ±ûËøêÂä®Â∞èÂä©Êâã„ÄÇÊàëÊ≠£Âú®ÂÆûÊó∂ÂàÜÊûê‰Ω†ÁöÑË∑ëÊ≠•Êï∞ÊçÆÔºåÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÂêóÔºü' }\n]);\n\nconst inputText = ref('');\nconst scrollTop = ref(0);\n\nconst close = () => {\n  emit('update:visible', false);\n};\n\nconst scrollToBottom = () => {\n  nextTick(() => {\n    scrollTop.value = 99999;\n  });\n};\n\nconst sendText = () => {\n  if (!inputText.value.trim()) return;\n  ask(inputText.value);\n  inputText.value = '';\n};\n\nconst ask = (text) => {\n  // User message\n  messages.value.push({ type: 'user', text });\n  scrollToBottom();\n\n  // Robot thinking simulation\n  setTimeout(() => {\n    analyzeAndReply(text);\n  }, 800);\n};\n\nconst analyzeAndReply = (question) => {\n  let reply = { type: 'robot', text: '', card: null };\n  const { distance, pace, heartRate } = props.runData;\n\n  if (question.includes('ÈÖçÈÄü')) {\n    reply.text = `ÂΩìÂâçÈÖçÈÄü ${pace.toFixed(2)} ÂàÜÈíü/ÂÖ¨Èáå„ÄÇ`;\n    let suggestion = '';\n    let color = '#20C997';\n    if (pace < 4) {\n      suggestion = 'ÈÄüÂ∫¶ÂæàÂø´ÔºåËØ∑Ê≥®ÊÑè‰øùÊåÅÂøÉÁéáÁ®≥ÂÆöÔºÅ';\n      color = '#FF6B6B';\n    } else if (pace > 8) {\n      suggestion = 'ÈÄüÂ∫¶Á®çÊÖ¢ÔºåÂª∫ËÆÆÂä†Âø´ÊëÜËáÇÈ¢ëÁéáÊù•ÊèêÂçáÈÄüÂ∫¶„ÄÇ';\n      color = '#FF9F43';\n    } else {\n      suggestion = 'ÈÖçÈÄü‰øùÊåÅÂæóÂæàÂ•ΩÔºåÁªßÁª≠Âä†Ê≤πÔºÅ';\n    }\n    \n    reply.card = {\n      title: 'üèÉ ÈÖçÈÄüÂàÜÊûê',\n      chartData: [\n        { label: 'ÂΩìÂâç', value: Math.min(100, (10/pace)*50), valText: `${pace.toFixed(1)}`, color: color },\n        { label: 'ÁõÆÊ†á', value: 70, valText: '6.0', color: '#3A7BD5' } // Assume target 6.0\n      ],\n      suggestion,\n      shareable: true\n    };\n  } else if (question.includes('ËøêÂä®Èáè') || question.includes('Â§üÂêó')) {\n    const km = (distance / 1000).toFixed(2);\n    reply.text = `‰Ω†‰ªäÂ§©Â∑≤ÁªèË∑ë‰∫Ü ${km} ÂÖ¨Èáå„ÄÇ`;\n    let suggestion = '';\n    if (km < 2) {\n      suggestion = 'Âª∫ËÆÆ‰ªäÂ§©Ëá≥Â∞ëÂÆåÊàê 3 ÂÖ¨ÈáåÔºåÂä†Ê≤πÔºÅ';\n    } else if (km > 10) {\n      suggestion = 'ËøêÂä®ÈáèÈùûÂ∏∏ÂÖÖË∂≥ÔºåÊ≥®ÊÑèË∑ëÂêéÊãâ‰º∏„ÄÇ';\n    } else {\n      suggestion = 'ËøêÂä®ÈáèÈÄÇ‰∏≠Ôºå‰øùÊåÅËøô‰∏™ËäÇÂ•è„ÄÇ';\n    }\n    reply.card = {\n      title: 'üìä ËøêÂä®ÈáèËØÑ‰º∞',\n      chartData: [\n        { label: '‰ªäÊó•', value: Math.min(100, (km/5)*100), valText: `${km}km`, color: '#20C997' },\n        { label: 'ÁõÆÊ†á', value: 100, valText: '5.0km', color: '#eee' }\n      ],\n      suggestion,\n      shareable: true\n    };\n  } else if (question.includes('Âª∫ËÆÆ') || question.includes('ÂàÜÊûê')) {\n    reply.text = 'Âü∫‰∫é‰Ω†ÁöÑÂÆûÊó∂Êï∞ÊçÆÔºåÊàëÁîüÊàê‰∫Ü‰∏Ä‰ªΩÁÆÄÊä•Ôºö';\n    reply.card = {\n      title: 'üí° ÁªºÂêàÊîπËøõÂª∫ËÆÆ',\n      suggestion: heartRate > 160 ? 'ÂøÉÁéáÂÅèÈ´òÔºåÂª∫ËÆÆÈÄÇÂΩìÊîæÊÖ¢ÈÄüÂ∫¶ÔºåË∞ÉÊï¥ÂëºÂê∏„ÄÇ' : 'ÂøÉÁéáÊéßÂà∂ËâØÂ•ΩÔºåÂèØ‰ª•Â∞ùËØïËøõË°åÈó¥Ê≠áË∑ëËÆ≠ÁªÉÊèêÂçáËÄêÂäõ„ÄÇ',\n      chartData: [\n        { label: 'ÂøÉÁéá', value: Math.min(100, (heartRate/200)*100), valText: `${heartRate}bpm`, color: heartRate > 160 ? '#FF4757' : '#20C997' },\n        { label: 'ÈÖçÈÄü', value: Math.min(100, (10/pace)*50), valText: `${pace.toFixed(1)}`, color: '#3A7BD5' }\n      ],\n      shareable: true\n    };\n  } else {\n    reply.text = 'Êä±Ê≠âÔºåÊàëËøòÂú®Â≠¶‰π†‰∏≠ÔºåÊöÇÊó∂Âè™ËÉΩÂõûÁ≠îÂÖ≥‰∫éÈÖçÈÄü„ÄÅËøêÂä®ÈáèÂíåÊîπËøõÂª∫ËÆÆÁöÑÈóÆÈ¢ò„ÄÇ';\n  }\n\n  messages.value.push(reply);\n  scrollToBottom();\n};\n\nconst shareToTeacher = (card) => {\n  uni.showToast({ title: 'Â∑≤ÂèëÈÄÅÁªôÊïôÂÆò', icon: 'success' });\n  emit('share', card);\n};\n\n// Auto welcome message update when visible changes\nwatch(() => props.visible, (val) => {\n  if (val && messages.value.length === 0) {\n    messages.value.push({ type: 'robot', text: '‰Ω†Â•ΩÔºÅÊàëÊòØ‰Ω†ÁöÑ‰∏ìÂ±ûËøêÂä®Â∞èÂä©Êâã„ÄÇ' });\n  }\n});\n</script>\n\n<style scoped>\n.ai-robot-container {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n}\n\n.robot-mask {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0,0,0,0.4);\n}\n\n.robot-window {\n  position: relative;\n  width: 100%;\n  height: 75vh;\n  background: #F5F7FA;\n  border-radius: 30rpx 30rpx 0 0;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  box-shadow: 0 -4rpx 20rpx rgba(0,0,0,0.1);\n}\n\n.robot-header {\n  background: #fff;\n  padding: 20rpx 30rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid #eee;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n}\n\n.robot-avatar {\n  width: 80rpx;\n  height: 80rpx;\n  background: #E3F2FD;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 40rpx;\n  margin-right: 20rpx;\n}\n\n.robot-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.robot-name {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.robot-status {\n  font-size: 24rpx;\n  color: #20C997;\n}\n\n.close-btn {\n  font-size: 40rpx;\n  color: #999;\n  padding: 10rpx;\n}\n\n.chat-area {\n  flex: 1;\n  padding: 20rpx;\n  box-sizing: border-box;\n  overflow-y: auto;\n}\n\n.message-item {\n  display: flex;\n  margin-bottom: 30rpx;\n}\n\n.message-item.robot {\n  justify-content: flex-start;\n}\n\n.message-item.user {\n  justify-content: flex-end;\n}\n\n.msg-avatar {\n  width: 70rpx;\n  height: 70rpx;\n  background: #fff;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 36rpx;\n  margin: 0 16rpx;\n  flex-shrink: 0;\n}\n\n.message-item.user .msg-avatar {\n  background: #DCF8C6;\n  order: 2;\n}\n\n.msg-content-box {\n  max-width: 70%;\n  display: flex;\n  flex-direction: column;\n}\n\n.message-item.user .msg-content-box {\n  align-items: flex-end;\n}\n\n.msg-content {\n  background: #fff;\n  padding: 20rpx;\n  border-radius: 20rpx;\n  font-size: 28rpx;\n  color: #333;\n  line-height: 1.5;\n  box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);\n}\n\n.message-item.user .msg-content {\n  background: #95EC69;\n}\n\n/* Card Style */\n.msg-card {\n  background: #fff;\n  border-radius: 20rpx;\n  padding: 24rpx;\n  margin-top: 16rpx;\n  width: 100%;\n  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.08);\n}\n\n.card-title {\n  font-size: 28rpx;\n  font-weight: bold;\n  margin-bottom: 20rpx;\n  color: #333;\n  border-left: 6rpx solid #3A7BD5;\n  padding-left: 16rpx;\n}\n\n.card-chart {\n  margin-bottom: 20rpx;\n}\n\n.chart-bar-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 12rpx;\n}\n\n.bar-label {\n  font-size: 24rpx;\n  color: #666;\n  width: 60rpx;\n}\n\n.bar-track {\n  flex: 1;\n  height: 16rpx;\n  background: #f0f0f0;\n  border-radius: 8rpx;\n  margin: 0 16rpx;\n  overflow: hidden;\n}\n\n.bar-fill {\n  height: 100%;\n  border-radius: 8rpx;\n  transition: width 0.5s ease;\n}\n\n.bar-val {\n  font-size: 24rpx;\n  color: #333;\n  width: 80rpx;\n  text-align: right;\n}\n\n.card-suggestion {\n  background: #FFF9C4;\n  padding: 16rpx;\n  border-radius: 12rpx;\n  font-size: 24rpx;\n  color: #FBC02D;\n  display: flex;\n  align-items: flex-start;\n  margin-bottom: 16rpx;\n}\n\n.suggestion-icon {\n  margin-right: 8rpx;\n}\n\n.share-btn {\n  width: 100%;\n  background: #3A7BD5;\n  color: #fff;\n  border: none;\n}\n\n/* Input Area */\n.input-area {\n  background: #fff;\n  padding: 20rpx;\n  border-top: 1px solid #eee;\n}\n\n.quick-replies {\n  white-space: nowrap;\n  margin-bottom: 20rpx;\n}\n\n.chip {\n  display: inline-block;\n  padding: 10rpx 24rpx;\n  background: #F0F2F5;\n  color: #333;\n  border-radius: 30rpx;\n  font-size: 24rpx;\n  margin-right: 16rpx;\n}\n\n.input-box {\n  display: flex;\n  align-items: center;\n}\n\n.text-input {\n  flex: 1;\n  background: #F0F2F5;\n  height: 72rpx;\n  border-radius: 36rpx;\n  padding: 0 30rpx;\n  font-size: 28rpx;\n  margin-right: 20rpx;\n}\n\n.send-btn {\n  background: #20C997;\n  color: #fff;\n  padding: 14rpx 30rpx;\n  border-radius: 36rpx;\n  font-size: 28rpx;\n  font-weight: bold;\n}\n</style>","import Component from 'D:/PC/Document/HBuilderProjects/run-checkin/components/ai-chat-robot/ai-chat-robot.vue'\nwx.createComponent(Component)"],"names":["ref","nextTick","uni","watch"],"mappings":";;;;;;;;;;;;;AAsEA,UAAM,QAAQ;AAQd,UAAM,OAAO;AAEb,UAAM,WAAWA,cAAAA,IAAI;AAAA,MACnB,EAAE,MAAM,SAAS,MAAM,0CAA2C;AAAA,IACpE,CAAC;AAED,UAAM,YAAYA,cAAAA,IAAI,EAAE;AACxB,UAAM,YAAYA,cAAAA,IAAI,CAAC;AAEvB,UAAM,QAAQ,MAAM;AAClB,WAAK,kBAAkB,KAAK;AAAA,IAC9B;AAEA,UAAM,iBAAiB,MAAM;AAC3BC,oBAAAA,WAAS,MAAM;AACb,kBAAU,QAAQ;AAAA,MACtB,CAAG;AAAA,IACH;AAEA,UAAM,WAAW,MAAM;AACrB,UAAI,CAAC,UAAU,MAAM,KAAM;AAAE;AAC7B,UAAI,UAAU,KAAK;AACnB,gBAAU,QAAQ;AAAA,IACpB;AAEA,UAAM,MAAM,CAAC,SAAS;AAEpB,eAAS,MAAM,KAAK,EAAE,MAAM,QAAQ,KAAI,CAAE;AAC1C;AAGA,iBAAW,MAAM;AACf,wBAAgB,IAAI;AAAA,MACrB,GAAE,GAAG;AAAA,IACR;AAEA,UAAM,kBAAkB,CAAC,aAAa;AACpC,UAAI,QAAQ,EAAE,MAAM,SAAS,MAAM,IAAI,MAAM;AAC7C,YAAM,EAAE,UAAU,MAAM,UAAS,IAAK,MAAM;AAE5C,UAAI,SAAS,SAAS,IAAI,GAAG;AAC3B,cAAM,OAAO,QAAQ,KAAK,QAAQ,CAAC,CAAC;AACpC,YAAI,aAAa;AACjB,YAAI,QAAQ;AACZ,YAAI,OAAO,GAAG;AACZ,uBAAa;AACb,kBAAQ;AAAA,QACd,WAAe,OAAO,GAAG;AACnB,uBAAa;AACb,kBAAQ;AAAA,QACd,OAAW;AACL,uBAAa;AAAA,QACd;AAED,cAAM,OAAO;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,YACT,EAAE,OAAO,MAAM,OAAO,KAAK,IAAI,KAAM,KAAG,OAAM,EAAE,GAAG,SAAS,GAAG,KAAK,QAAQ,CAAC,CAAC,IAAI,MAAc;AAAA,YAChG,EAAE,OAAO,MAAM,OAAO,IAAI,SAAS,OAAO,OAAO,UAAW;AAAA;AAAA,UAC7D;AAAA,UACD;AAAA,UACA,WAAW;AAAA,QACjB;AAAA,MACA,WAAa,SAAS,SAAS,KAAK,KAAK,SAAS,SAAS,IAAI,GAAG;AAC9D,cAAM,MAAM,WAAW,KAAM,QAAQ,CAAC;AACtC,cAAM,OAAO,WAAW,EAAE;AAC1B,YAAI,aAAa;AACjB,YAAI,KAAK,GAAG;AACV,uBAAa;AAAA,QACnB,WAAe,KAAK,IAAI;AAClB,uBAAa;AAAA,QACnB,OAAW;AACL,uBAAa;AAAA,QACd;AACD,cAAM,OAAO;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,YACT,EAAE,OAAO,MAAM,OAAO,KAAK,IAAI,KAAM,KAAG,IAAG,GAAG,GAAG,SAAS,GAAG,EAAE,MAAM,OAAO,UAAW;AAAA,YACvF,EAAE,OAAO,MAAM,OAAO,KAAK,SAAS,SAAS,OAAO,OAAQ;AAAA,UAC7D;AAAA,UACD;AAAA,UACA,WAAW;AAAA,QACjB;AAAA,MACA,WAAa,SAAS,SAAS,IAAI,KAAK,SAAS,SAAS,IAAI,GAAG;AAC7D,cAAM,OAAO;AACb,cAAM,OAAO;AAAA,UACX,OAAO;AAAA,UACP,YAAY,YAAY,MAAM,wBAAwB;AAAA,UACtD,WAAW;AAAA,YACT,EAAE,OAAO,MAAM,OAAO,KAAK,IAAI,KAAM,YAAU,MAAK,GAAG,GAAG,SAAS,GAAG,SAAS,OAAO,OAAO,YAAY,MAAM,YAAY,UAAW;AAAA,YACtI,EAAE,OAAO,MAAM,OAAO,KAAK,IAAI,KAAM,KAAG,OAAM,EAAE,GAAG,SAAS,GAAG,KAAK,QAAQ,CAAC,CAAC,IAAI,OAAO,UAAW;AAAA,UACrG;AAAA,UACD,WAAW;AAAA,QACjB;AAAA,MACA,OAAS;AACL,cAAM,OAAO;AAAA,MACd;AAED,eAAS,MAAM,KAAK,KAAK;AACzB;IACF;AAEA,UAAM,iBAAiB,CAAC,SAAS;AAC/BC,oBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,UAAS,CAAE;AAClD,WAAK,SAAS,IAAI;AAAA,IACpB;AAGAC,kBAAK,MAAC,MAAM,MAAM,SAAS,CAAC,QAAQ;AAClC,UAAI,OAAO,SAAS,MAAM,WAAW,GAAG;AACtC,iBAAS,MAAM,KAAK,EAAE,MAAM,SAAS,MAAM,kBAAiB,CAAE;AAAA,MAC/D;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7LD,GAAG,gBAAgB,SAAS;"}