import{r as a,Y as e,c as l,w as s,i as t,o as c,d as o,e as u,j as d,k as i,F as n,f as r,p as f,v as _,I as m,t as p,J as v}from"./index-B3FfpJ1t.js";import{r as y}from"./request.CTIzMnE_.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const k=h({__name:"list",setup(h){const k=a([]),w=a(!1),C=a(""),j=async()=>{try{const a=await y({url:"/admin/classes"});k.value=a}catch(a){console.error(a)}},z=async()=>{if(C.value)try{await y({url:"/admin/classes",method:"POST",data:{name:C.value}}),w.value=!1,C.value="",j()}catch(a){console.error(a)}};return e((()=>{j()})),(a,e)=>{const h=f,I=_,x=t,D=m;return c(),l(x,{class:"container"},{default:s((()=>[o(x,{class:"header"},{default:s((()=>[o(h,{class:"title"},{default:s((()=>[u("班级管理")])),_:1}),o(I,{size:"mini",type:"primary",onClick:e[0]||(e[0]=a=>w.value=!0)},{default:s((()=>[u("+ 新增班级")])),_:1})])),_:1}),o(x,{class:"list"},{default:s((()=>[o(x,{class:"list-item header-row"},{default:s((()=>[o(h,{class:"col id"},{default:s((()=>[u("ID")])),_:1}),o(h,{class:"col name"},{default:s((()=>[u("班级名称")])),_:1}),o(h,{class:"col teacher"},{default:s((()=>[u("绑定教师ID")])),_:1}),o(h,{class:"col count"},{default:s((()=>[u("人数")])),_:1}),o(h,{class:"col action"},{default:s((()=>[u("操作")])),_:1})])),_:1}),(c(!0),d(n,null,i(k.value,(a=>(c(),l(x,{key:a.id,class:"list-item"},{default:s((()=>[o(h,{class:"col id"},{default:s((()=>[u(p(a.id),1)])),_:2},1024),o(h,{class:"col name"},{default:s((()=>[u(p(a.name),1)])),_:2},1024),o(h,{class:"col teacher"},{default:s((()=>[u(p(a.teacher_id||"-"),1)])),_:2},1024),o(h,{class:"col count"},{default:s((()=>[u(p(a.student_count),1)])),_:2},1024),o(x,{class:"col action"},{default:s((()=>[o(h,{class:"delete-btn",onClick:e=>(async a=>{v({title:"确认删除",content:`确定要删除 ${a.name} 吗？`,success:async e=>{if(e.confirm)try{await y({url:`/admin/classes/${a.id}`,method:"DELETE"}),j()}catch(l){console.error(l)}}})})(a)},{default:s((()=>[u("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),w.value?(c(),l(x,{key:0,class:"modal-overlay"},{default:s((()=>[o(x,{class:"modal"},{default:s((()=>[o(x,{class:"modal-header"},{default:s((()=>[u("新增班级")])),_:1}),o(D,{class:"input",modelValue:C.value,"onUpdate:modelValue":e[1]||(e[1]=a=>C.value=a),placeholder:"请输入班级名称"},null,8,["modelValue"]),o(x,{class:"modal-footer"},{default:s((()=>[o(I,{size:"mini",onClick:e[2]||(e[2]=a=>w.value=!1)},{default:s((()=>[u("取消")])),_:1}),o(I,{size:"mini",type:"primary",onClick:z},{default:s((()=>[u("确定")])),_:1})])),_:1})])),_:1})])),_:1})):r("",!0)])),_:1})}}},[["__scopeId","data-v-177ae23b"]]);export{k as default};
