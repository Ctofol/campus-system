import{r as a,a1 as s,c as e,w as t,i as l,o as c,d as n,v as o,e as u,f as r,h as i,F as d,q as f,t as _,J as m,p}from"./index-DJkcSMuy.js";import{r as v}from"./request.DDN5gHc8.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=h({__name:"list",setup(h){const y=a("student"),k=a([]),b=async()=>{try{const a=await v({url:"/admin/users",data:{role:y.value}});k.value=a}catch(a){console.error(a)}};return s((()=>{b()})),(a,s)=>{const h=l,w=f;return c(),e(h,{class:"container"},{default:t((()=>[n(h,{class:"tabs"},{default:t((()=>[n(h,{class:o(["tab",{active:"student"===y.value}]),onClick:s[0]||(s[0]=a=>{y.value="student",b()})},{default:t((()=>[u("学生")])),_:1},8,["class"]),n(h,{class:o(["tab",{active:"teacher"===y.value}]),onClick:s[1]||(s[1]=a=>{y.value="teacher",b()})},{default:t((()=>[u("教师")])),_:1},8,["class"])])),_:1}),n(h,{class:"list"},{default:t((()=>[n(h,{class:"list-item header-row"},{default:t((()=>[n(w,{class:"col name"},{default:t((()=>[u("姓名")])),_:1}),n(w,{class:"col phone"},{default:t((()=>[u("手机号")])),_:1}),"student"===y.value?(c(),e(w,{key:0,class:"col info"},{default:t((()=>[u("班级")])),_:1})):(c(),e(w,{key:1,class:"col info"},{default:t((()=>[u("工号")])),_:1})),n(w,{class:"col action"},{default:t((()=>[u("操作")])),_:1})])),_:1}),(c(!0),r(d,null,i(k.value,(a=>(c(),e(h,{key:a.id,class:"list-item"},{default:t((()=>[n(w,{class:"col name"},{default:t((()=>[u(_(a.name),1)])),_:2},1024),n(w,{class:"col phone"},{default:t((()=>[u(_(a.phone),1)])),_:2},1024),n(w,{class:"col info"},{default:t((()=>[u(_("student"===y.value?a.class_name:a.student_id),1)])),_:2},1024),n(h,{class:"col action"},{default:t((()=>[n(w,{class:"btn reset",onClick:s=>(async a=>{m({title:"重置密码",content:`确定要重置 ${a.name} 的密码为 123456 吗？`,success:async s=>{if(s.confirm)try{await v({url:`/admin/users/${a.id}/reset-password`,method:"POST"}),p({title:"重置成功",icon:"success"})}catch(e){console.error(e)}}})})(a)},{default:t((()=>[u("重置")])),_:2},1032,["onClick"]),n(w,{class:"btn delete",onClick:s=>(async a=>{m({title:"确认删除",content:`确定要删除用户 ${a.name} 吗？`,success:async s=>{if(s.confirm)try{await v({url:`/admin/users/${a.id}`,method:"DELETE"}),b()}catch(e){console.error(e)}}})})(a)},{default:t((()=>[u("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}}},[["__scopeId","data-v-7b4df6b2"]]);export{y as default};
