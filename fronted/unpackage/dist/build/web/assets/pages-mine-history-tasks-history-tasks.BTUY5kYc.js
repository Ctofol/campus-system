import{r as a,g as s,c as t,w as e,i as l,o as r,d as c,e as u,n as d,f as n,h as o,F as i,W as p,q as f,t as _,v as m,j as g}from"./index-D4dSIJeF.js";import{a as k}from"./uni-app.es.DJB9Vm6C.js";import{g as y}from"./request.Da1Pdojv.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const h=v({__name:"history-tasks",setup(v){const h=a(20),x=a([]);k((()=>{h.value=s().statusBarHeight||20,j()}));const b=()=>{p()},j=async()=>{try{const a=await y({page:1,size:50});a.items&&(x.value=a.items)}catch(a){console.error("Fetch history tasks failed",a)}},w=a=>({pending:"待开始",in_progress:"进行中",completed:"已完成",expired:"已过期",canceled:"已取消"}[a]||a),$=a=>{if(!a)return"";const s=new Date(a);return`${s.getMonth()+1}-${s.getDate()} ${s.getHours()}:${s.getMinutes().toString().padStart(2,"0")}`};return(a,s)=>{const p=f,k=l;return r(),t(k,{class:"history-tasks-page"},{default:e((()=>[c(k,{class:"custom-navbar",style:d({paddingTop:h.value+"px"})},{default:e((()=>[c(k,{class:"navbar-content"},{default:e((()=>[c(k,{class:"back-btn",onClick:b},{default:e((()=>[c(p,{class:"back-arrow"},{default:e((()=>[u("←")])),_:1})])),_:1}),c(p,{class:"navbar-title"},{default:e((()=>[u("历史任务")])),_:1})])),_:1})])),_:1},8,["style"]),c(k,{class:"content-wrapper",style:d({paddingTop:h.value+44+"px"})},{default:e((()=>[x.value.length>0?(r(),t(k,{key:0,class:"task-list"},{default:e((()=>[(r(!0),n(i,null,o(x.value,((a,s)=>(r(),t(k,{class:"task-item",key:s},{default:e((()=>[c(k,{class:"task-header"},{default:e((()=>{return[c(p,{class:"task-title"},{default:e((()=>[u(_(a.title),1)])),_:2},1024),c(p,{class:m(["task-status",(s=a.status,"completed"===s?"status-green":"expired"===s||"canceled"===s?"status-gray":"status-orange")])},{default:e((()=>[u(_(w(a.status)),1)])),_:2},1032,["class"])];var s})),_:2},1024),c(k,{class:"task-desc"},{default:e((()=>[u(_(a.description||"暂无描述"),1)])),_:2},1024),c(k,{class:"task-meta"},{default:e((()=>[c(p,{class:"meta-item"},{default:e((()=>[u("发布于: "+_($(a.created_at)),1)])),_:2},1024),a.deadline?(r(),t(p,{key:0,class:"meta-item"},{default:e((()=>[u("截止: "+_($(a.deadline)),1)])),_:2},1024)):g("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(r(),t(k,{key:1,class:"empty-state"},{default:e((()=>[c(p,{class:"empty-text"},{default:e((()=>[u("暂无历史任务")])),_:1})])),_:1}))])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-3df80f48"]]);export{h as default};
