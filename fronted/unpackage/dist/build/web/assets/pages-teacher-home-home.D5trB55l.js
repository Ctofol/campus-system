import{r as a,g as e,c as t,w as l,i as s,o as c,a as d,b as u,t as o,f as n,h as i,F as r,d as f,j as _,l as p,s as m,k as v,N as h,S as y,q as k,I as g,a9 as b,m as C,n as q,aa as x}from"./index-uRXP6RJd.js";import{_ as j}from"./avatar.WOnTDsO9.js";import{o as w}from"./uni-app.es.CewT9dt1.js";import{C as V}from"./CustomTabBar.BfyoH42O.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";const B=I({__name:"home",setup(I){const B=a({});w((()=>{uni.hideHomeButton&&uni.hideHomeButton();const a=e("userInfo");if(a)try{B.value="string"==typeof a?JSON.parse(a):a}catch(t){console.error("JSON parse error",t),B.value={}}}));const N=a({studentCount:128,todayCheckin:105,abnormalCount:3,avgPace:"5'45\"",taskCount:5,complianceRate:92}),S=a([{day:"周一",val:60,color:"#e0e0e0"},{day:"周二",val:80,color:"#e0e0e0"},{day:"周三",val:45,color:"#e0e0e0"},{day:"周四",val:90,color:"#20C997"},{day:"周五",val:70,color:"#e0e0e0"},{day:"周六",val:30,color:"#e0e0e0"},{day:"周日",val:50,color:"#e0e0e0"}]),F=a(!1),H=a(!1),J=a({title:"",type:"日常",desc:""}),O=a([{title:"3000米摸底测试",type:"考核",typeClass:"tag-red",status:"进行中",percent:76},{title:"周末晨跑打卡",type:"日常",typeClass:"tag-green",status:"进行中",percent:35},{title:"核心力量专项",type:"训练",typeClass:"tag-blue",status:"即将截止",percent:88}]),U=a([{id:1,student:"张三",type:"心率过高",value:"195 bpm",time:"10:30"},{id:2,student:"李四",type:"配速异常",value:"过快",time:"10:45"},{id:3,student:"王五",type:"动作不达标",value:"引体向上",time:"10:50"}]),$=()=>{H.value=!1,J.value={title:"",type:"日常",desc:""},F.value=!0},z=()=>{if(!J.value.title)return m({title:"请输入标题",icon:"none"});m({title:H.value?"修改成功":"发布成功",icon:"success"}),F.value=!1};return(a,e)=>{const w=s,I=v,A=h,L=y,M=k,P=g,R=b;return c(),t(w,{class:"home-container"},{default:l((()=>[d(w,{class:"teacher-dashboard"},{default:l((()=>[d(w,{class:"custom-nav-bar"},{default:l((()=>[d(w,{class:"nav-status-bar"}),d(w,{class:"nav-content"},{default:l((()=>[d(I,{class:"nav-title"},{default:l((()=>[u("教师工作台")])),_:1})])),_:1})])),_:1}),d(w,{class:"teacher-header"},{default:l((()=>[d(w,{class:"teacher-info"},{default:l((()=>[d(I,{class:"teacher-name"},{default:l((()=>[u(o(B.value.name||"教官"),1)])),_:1}),d(I,{class:"teacher-title"},{default:l((()=>[u("警务体能教研室")])),_:1})])),_:1}),d(w,{class:"teacher-avatar"},{default:l((()=>[d(A,{class:"avatar-img",src:j,mode:"aspectFill"})])),_:1})])),_:1}),d(w,{class:"dashboard-stats"},{default:l((()=>[d(w,{class:"stat-card"},{default:l((()=>[d(I,{class:"stat-num"},{default:l((()=>[u(o(N.value.todayCheckin),1)])),_:1}),d(I,{class:"stat-label"},{default:l((()=>[u("今日打卡")])),_:1})])),_:1}),d(w,{class:"stat-card"},{default:l((()=>[d(I,{class:"stat-num"},{default:l((()=>[u(o(N.value.abnormalCount),1)])),_:1}),d(I,{class:"stat-label"},{default:l((()=>[u("异常待处理")])),_:1})])),_:1}),d(w,{class:"stat-card"},{default:l((()=>[d(I,{class:"stat-num"},{default:l((()=>[u(o(N.value.pendingApprovals||12),1)])),_:1}),d(I,{class:"stat-label"},{default:l((()=>[u("待审批")])),_:1})])),_:1})])),_:1}),d(w,{class:"section-card todo-section"},{default:l((()=>[d(w,{class:"section-header"},{default:l((()=>[d(I,{class:"section-title"},{default:l((()=>[u("今日待办")])),_:1}),d(I,{class:"section-more"},{default:l((()=>[u("全部 >")])),_:1})])),_:1}),d(w,{class:"todo-list"},{default:l((()=>[d(w,{class:"todo-item"},{default:l((()=>[d(w,{class:"todo-check"}),d(w,{class:"todo-content"},{default:l((()=>[d(I,{class:"todo-text"},{default:l((()=>[u("审批 2023级体测成绩")])),_:1}),d(I,{class:"todo-time"},{default:l((()=>[u("截止: 17:00")])),_:1})])),_:1})])),_:1}),d(w,{class:"todo-item"},{default:l((()=>[d(w,{class:"todo-check"}),d(w,{class:"todo-content"},{default:l((()=>[d(I,{class:"todo-text"},{default:l((()=>[u("发布本周训练计划")])),_:1}),d(I,{class:"todo-time"},{default:l((()=>[u("待处理")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),d(w,{class:"section-card chart-section"},{default:l((()=>[d(w,{class:"section-header"},{default:l((()=>[d(I,{class:"section-title"},{default:l((()=>[u("学员体能概览")])),_:1}),d(I,{class:"section-more"},{default:l((()=>[u("更多 >")])),_:1})])),_:1}),d(w,{class:"overview-chart"},{default:l((()=>[d(w,{class:"chart-col"},{default:l((()=>[d(w,{class:"chart-ring ring-green"},{default:l((()=>[d(I,{class:"ring-val"},{default:l((()=>[u("92%")])),_:1}),d(I,{class:"ring-label"},{default:l((()=>[u("达标率")])),_:1})])),_:1}),d(I,{class:"chart-name"},{default:l((()=>[u("体能达标")])),_:1})])),_:1}),d(w,{class:"chart-col"},{default:l((()=>[d(w,{class:"chart-ring ring-blue"},{default:l((()=>[d(I,{class:"ring-val"},{default:l((()=>[u("85%")])),_:1}),d(I,{class:"ring-label"},{default:l((()=>[u("完成率")])),_:1})])),_:1}),d(I,{class:"chart-name"},{default:l((()=>[u("本周任务")])),_:1})])),_:1}),d(w,{class:"chart-col"},{default:l((()=>[d(w,{class:"chart-ring ring-red"},{default:l((()=>[d(I,{class:"ring-val"},{default:l((()=>[u("5'45\"")])),_:1}),d(I,{class:"ring-label"},{default:l((()=>[u("平均配速")])),_:1})])),_:1}),d(I,{class:"chart-name"},{default:l((()=>[u("跑步状态")])),_:1})])),_:1})])),_:1}),d(w,{class:"trend-chart"},{default:l((()=>[d(I,{class:"trend-title"},{default:l((()=>[u("本周运动趋势")])),_:1}),d(w,{class:"trend-bars"},{default:l((()=>[(c(!0),n(r,null,i(S.value,((a,e)=>(c(),t(w,{class:"t-bar-group",key:e},{default:l((()=>[d(w,{class:"t-bar",style:C({height:a.val+"%",background:a.color})},null,8,["style"]),d(I,{class:"t-day"},{default:l((()=>[u(o(a.day),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),d(w,{class:"section-card task-widget"},{default:l((()=>[d(w,{class:"section-header"},{default:l((()=>[d(I,{class:"section-title"},{default:l((()=>[u("快速任务管理")])),_:1}),d(w,{class:"header-actions"},{default:l((()=>[d(I,{class:"section-action",onClick:$},{default:l((()=>[u("+ 发布")])),_:1})])),_:1})])),_:1}),d(L,{"scroll-x":"",class:"quick-task-scroll"},{default:l((()=>[(c(!0),n(r,null,i(O.value,((a,s)=>(c(),t(w,{class:"quick-task-item",key:s,onClick:e=>(a=>{q({url:`/pages/teacher/tasks/detail?id=999&title=${a.title}`})})(a)},{default:l((()=>[d(w,{class:"qt-header"},{default:l((()=>[d(I,{class:p(["qt-type",a.typeClass])},{default:l((()=>[u(o(a.type),1)])),_:2},1032,["class"]),d(I,{class:"qt-status"},{default:l((()=>[u(o(a.status),1)])),_:2},1024)])),_:2},1024),d(I,{class:"qt-title"},{default:l((()=>[u(o(a.title),1)])),_:2},1024),d(w,{class:"qt-progress"},{default:l((()=>[d(w,{class:"qt-bar-bg"},{default:l((()=>[d(w,{class:"qt-bar-fill",style:C({width:a.percent+"%"})},null,8,["style"])])),_:2},1024),d(I,{class:"qt-val"},{default:l((()=>[u(o(a.percent)+"%",1)])),_:2},1024)])),_:2},1024),d(w,{class:"qt-actions",onClick:e[0]||(e[0]=_((()=>{}),["stop"]))},{default:l((()=>[d(I,{class:"qt-btn",onClick:e=>(a=>{H.value=!0,J.value={...a,desc:"任务描述..."},F.value=!0})(a)},{default:l((()=>[u("编辑")])),_:2},1032,["onClick"]),a.percent<100?(c(),t(I,{key:0,class:"qt-btn warn",onClick:e=>(a=>{m({title:`已催办任务: ${a.title}`,icon:"none"})})(a)},{default:l((()=>[u("催办")])),_:2},1032,["onClick"])):f("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),U.value.length>0?(c(),t(w,{key:0,class:"section-card alert-widget"},{default:l((()=>[d(w,{class:"section-header"},{default:l((()=>[d(I,{class:"section-title red-dot"},{default:l((()=>[u("⚠️ 实时警报")])),_:1})])),_:1}),d(w,{class:"alert-feed"},{default:l((()=>[(c(!0),n(r,null,i(U.value,((a,e)=>(c(),t(w,{class:"feed-item",key:e},{default:l((()=>[d(w,{class:"feed-content"},{default:l((()=>[d(I,{class:"feed-msg"},{default:l((()=>[d(I,{class:"feed-name"},{default:l((()=>[u(o(a.student),1)])),_:2},1024),u(" "+o(a.type)+" ("+o(a.value)+")",1)])),_:2},1024),d(I,{class:"feed-time"},{default:l((()=>[u(o(a.time),1)])),_:2},1024)])),_:2},1024),d(M,{class:"feed-btn",size:"mini",onClick:a=>{return t=e,void x({itemList:["联系学生","标记已处理","查看详情"],success:a=>{1===a.tapIndex?(U.value.splice(t,1),N.value.abnormalCount=Math.max(0,N.value.abnormalCount-1),m({title:"已处理",icon:"success"})):0===a.tapIndex?m({title:"已发送通知",icon:"none"}):q({url:"/pages/teacher/exceptions/exceptions"})}});var t}},{default:l((()=>[u("干预")])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})):f("",!0),F.value?(c(),t(w,{key:1,class:"modal-overlay",onClick:e[8]||(e[8]=a=>F.value=!1)},{default:l((()=>[d(w,{class:"task-modal",onClick:e[7]||(e[7]=_((()=>{}),["stop"]))},{default:l((()=>[d(w,{class:"modal-header"},{default:l((()=>[d(I,{class:"modal-title"},{default:l((()=>[u(o(H.value?"编辑任务":"快速发布任务"),1)])),_:1}),d(I,{class:"close-btn",onClick:e[1]||(e[1]=a=>F.value=!1)},{default:l((()=>[u("×")])),_:1})])),_:1}),d(w,{class:"modal-body"},{default:l((()=>[d(P,{class:"modal-input",placeholder:"任务标题",modelValue:J.value.title,"onUpdate:modelValue":e[2]||(e[2]=a=>J.value.title=a)},null,8,["modelValue"]),d(w,{class:"modal-types"},{default:l((()=>[d(w,{class:p(["type-chip",{active:"考核"===J.value.type}]),onClick:e[3]||(e[3]=a=>J.value.type="考核")},{default:l((()=>[u("考核")])),_:1},8,["class"]),d(w,{class:p(["type-chip",{active:"日常"===J.value.type}]),onClick:e[4]||(e[4]=a=>J.value.type="日常")},{default:l((()=>[u("日常")])),_:1},8,["class"]),d(w,{class:p(["type-chip",{active:"训练"===J.value.type}]),onClick:e[5]||(e[5]=a=>J.value.type="训练")},{default:l((()=>[u("训练")])),_:1},8,["class"])])),_:1}),d(R,{class:"modal-textarea",placeholder:"任务描述",modelValue:J.value.desc,"onUpdate:modelValue":e[6]||(e[6]=a=>J.value.desc=a)},null,8,["modelValue"])])),_:1}),d(M,{class:"modal-submit-btn",onClick:z},{default:l((()=>[u("确认发布")])),_:1})])),_:1})])),_:1})):f("",!0),d(w,{style:{height:"120rpx"}}),d(V,{current:"/pages/teacher/home/home"})])),_:1})])),_:1})}}},[["__scopeId","data-v-a31a7c75"]]);export{B as default};
