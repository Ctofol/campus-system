import{r as a,a1 as e,c as l,w as s,i as t,o as c,d as o,e as u,f as d,h as i,F as n,j as r,q as f,u as _,I as m,t as p,J as h}from"./index-D4dSIJeF.js";import{r as v}from"./request.Da1Pdojv.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const k=y({__name:"list",setup(y){const k=a([]),w=a(!1),C=a(""),j=async()=>{try{const a=await v({url:"/admin/classes"});k.value=a}catch(a){console.error(a)}},D=async()=>{if(C.value)try{await v({url:"/admin/classes",method:"POST",data:{name:C.value}}),w.value=!1,C.value="",j()}catch(a){console.error(a)}};return e((()=>{j()})),(a,e)=>{const y=f,E=_,I=t,x=m;return c(),l(I,{class:"container"},{default:s((()=>[o(I,{class:"header"},{default:s((()=>[o(y,{class:"title"},{default:s((()=>[u("班级管理")])),_:1}),o(E,{size:"mini",type:"primary",onClick:e[0]||(e[0]=a=>w.value=!0)},{default:s((()=>[u("+ 新增班级")])),_:1})])),_:1}),o(I,{class:"list"},{default:s((()=>[o(I,{class:"list-item header-row"},{default:s((()=>[o(y,{class:"col id"},{default:s((()=>[u("ID")])),_:1}),o(y,{class:"col name"},{default:s((()=>[u("班级名称")])),_:1}),o(y,{class:"col teacher"},{default:s((()=>[u("绑定教师ID")])),_:1}),o(y,{class:"col count"},{default:s((()=>[u("人数")])),_:1}),o(y,{class:"col action"},{default:s((()=>[u("操作")])),_:1})])),_:1}),(c(!0),d(n,null,i(k.value,(a=>(c(),l(I,{key:a.id,class:"list-item"},{default:s((()=>[o(y,{class:"col id"},{default:s((()=>[u(p(a.id),1)])),_:2},1024),o(y,{class:"col name"},{default:s((()=>[u(p(a.name),1)])),_:2},1024),o(y,{class:"col teacher"},{default:s((()=>[u(p(a.teacher_id||"-"),1)])),_:2},1024),o(y,{class:"col count"},{default:s((()=>[u(p(a.student_count),1)])),_:2},1024),o(I,{class:"col action"},{default:s((()=>[o(y,{class:"delete-btn",onClick:e=>(async a=>{h({title:"确认删除",content:`确定要删除 ${a.name} 吗？`,success:async e=>{if(e.confirm)try{await v({url:`/admin/classes/${a.id}`,method:"DELETE"}),j()}catch(l){console.error(l)}}})})(a)},{default:s((()=>[u("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),w.value?(c(),l(I,{key:0,class:"modal-overlay"},{default:s((()=>[o(I,{class:"modal"},{default:s((()=>[o(I,{class:"modal-header"},{default:s((()=>[u("新增班级")])),_:1}),o(x,{class:"input",modelValue:C.value,"onUpdate:modelValue":e[1]||(e[1]=a=>C.value=a),placeholder:"请输入班级名称"},null,8,["modelValue"]),o(I,{class:"modal-footer"},{default:s((()=>[o(E,{size:"mini",onClick:e[2]||(e[2]=a=>w.value=!1)},{default:s((()=>[u("取消")])),_:1}),o(E,{size:"mini",type:"primary",onClick:D},{default:s((()=>[u("确定")])),_:1})])),_:1})])),_:1})])),_:1})):r("",!0)])),_:1})}}},[["__scopeId","data-v-177ae23b"]]);export{k as default};
