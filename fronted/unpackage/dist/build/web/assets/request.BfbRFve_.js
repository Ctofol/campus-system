import{a as t,$ as a,C as e,s,b as o}from"./index-C5iLBQvu.js";let i="http://127.0.0.1:8000";try{const t=location&&location.protocol?location.protocol:"http:";i=`${t}//${location&&location.hostname?location.hostname:"localhost"}:8000`}catch(f){i="http://127.0.0.1:8000"}const r=i,n=(...i)=>{let n={};return n="string"==typeof i[0]?{url:i[0],...i[1]}:i[0]||{},new Promise(((i,l)=>{const h=t("token"),c={"Content-Type":"application/json",...n.header||{}};h&&(c.Authorization=`Bearer ${h}`),a({url:`${r}${n.url}`,method:n.method||"GET",data:n.data||{},header:c,success:t=>{t.statusCode>=200&&t.statusCode<300?i(t.data):401===t.statusCode?(e("token"),e("userInfo"),s({title:"登录已过期，请重新登录",icon:"none"}),setTimeout((()=>{o({url:"/pages/login/login"})}),1500),l(t.data)):(s({title:t.data.detail||"请求失败",icon:"none"}),l(t.data))},fail:t=>{s({title:"网络请求失败",icon:"none"}),l(t)}})}))},l=t=>n({url:"/auth/login",method:"POST",data:t}),h=t=>n({url:"/auth/register",method:"POST",data:t}),c=t=>n({url:"/activity/finish",method:"POST",data:t}),u=t=>{let a="";return t&&(a=`?page=${t.page}&size=${t.size}`),n({url:`/teacher/activities${a}`,method:"GET"})},d=t=>n({url:`/teacher/activity/${t}/approve`,method:"POST"}),p=t=>n({url:"/teacher/tasks",method:"POST",data:t}),m=t=>n({url:`/teacher/tasks/${t}`,method:"DELETE"}),$=t=>{let a="";if(t){const e=[];t.page&&e.push(`page=${t.page}`),t.size&&e.push(`size=${t.size}`),t.status&&e.push(`status=${t.status}`),e.length>0&&(a=`?${e.join("&")}`)}return n({url:`/teacher/tasks${a}`,method:"GET"})},T=t=>{let a="";return t&&(a=`?page=${t.page}&size=${t.size}`),n({url:`/student/tasks${a}`,method:"GET"})},g=(t,a)=>n({url:`/teacher/student/${t}/activities`,method:"GET",data:a}),k=t=>n({url:`/teacher/tasks/${t}`,method:"GET"}),E=()=>n({url:"/checkpoints",method:"GET"}),z=t=>n({url:"/activity/checkin",method:"POST",data:t});export{r as B,E as a,h as b,z as c,$ as d,m as e,k as f,T as g,p as h,u as i,d as j,g as k,l,n as r,c as s};
