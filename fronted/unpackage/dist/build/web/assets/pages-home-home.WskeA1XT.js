import{r as a,g as s,a as t,b as e,c as l,w as c,i as u,o as n,d as i,e as d,n as o,t as r,f,h as _,j as m,k as p,F as k,l as g,m as y,s as v,p as C,S as b,q as h}from"./index-C5iLBQvu.js";import{o as x}from"./uni-app.es.BEWjhZNk.js";import{C as j}from"./CustomTabBar.C3uGOtvP.js";import{g as B}from"./request.BfbRFve_.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";const D=F({__name:"home",setup(F){const D=a(20),E=a("student"),w=a({}),I=a(null);x((()=>{D.value=s().statusBarHeight||20;if(!t("token"))return void e({url:"/pages/login/login"});const a=t("userRole")||t("role");a&&(E.value=a);const l=t("userInfo");if(l)try{w.value="string"==typeof l?JSON.parse(l):l}catch(c){console.error("JSON parse error",c),w.value={}}(async()=>{try{const a=await B({page:1,size:1});if(a.items&&a.items.length>0){const s=a.items[0];I.value={id:s.id,title:s.title,desc:s.description||(s.min_distance?`ç›®æ ‡: ${s.min_distance}km`:"è¯·æŸ¥çœ‹è¯¦æƒ…")}}else I.value=null}catch(c){if(!t("token"))return;console.error("Fetch task failed",c)}})()}));const $=a(!0),N=a(!1),S=a([{name:"å¼•ä½“å‘ä¸Š",tag:"ä½“æµ‹é¡¹ç›®",tagClass:"tag-police",status:"æœªå®Œæˆ",type:"pull-up"},{name:"ä»°å§èµ·å",tag:"æ—¥å¸¸æµ‹è¯„",tagClass:"tag-daily",status:"è¿›è¡Œä¸­",type:"sit-up"},{name:"ä¿¯å§æ’‘",tag:"åŸºç¡€è®­ç»ƒ",tagClass:"tag-base",status:"æœªå¼€å§‹",type:"push-up"}]),T=a([{id:1,name:"ç»¼åˆä½“èƒ½æµ‹è¯•",type:"è€ƒæ ¸",typeClass:"tag-red",duration:45,difficulty:"é«˜å¼ºåº¦",isCompleted:!1},{id:2,name:"1000ç±³çˆ†å‘åŠ›è®­ç»ƒ",type:"ä¸“é¡¹",typeClass:"tag-blue",duration:20,difficulty:"ä¸­å¼ºåº¦",isCompleted:!0},{id:3,name:"æ ¸å¿ƒåŠ›é‡å¼ºåŒ–è¯¾ç¨‹",type:"æ—¥å¸¸",typeClass:"tag-green",duration:30,difficulty:"ä½Žå¼ºåº¦",isCompleted:!1}]),q=a({name:"åˆ‘ä¾¦å…ˆé”‹è·‘å›¢",rank:3,members:42,totalDistance:1205.8,activityCount:5}),z=a([{name:"äº”å››é’å¹´èŠ‚çŽ¯æ ¡è·‘",time:"5æœˆ4æ—¥ 07:00",status:"æŠ¥åä¸­",statusClass:"status-active",joined:128},{name:"å‘¨æœ«å¤œè·‘æ‰“å¡èµ›",time:"æœ¬å‘¨å…­ 19:00",status:"è¿›è¡Œä¸­",statusClass:"status-ing",joined:56},{name:"è¿åŠ¨æŠ€èƒ½äº¤æµä¼š",time:"ä¸‹å‘¨ä¸‰ 14:00",status:"é¢„å‘Š",statusClass:"status-future",joined:30}]);a([{user:"å¼ ä¼Ÿ",time:"10åˆ†é’Ÿå‰",action:"å®Œæˆäº†",result:"5å…¬é‡Œæ™¨è·‘",likes:12,avatarColor:"#FF6B6B"},{user:"æŽå¨œ",time:"35åˆ†é’Ÿå‰",action:"æ‰“å¡äº†",result:"æ ¸å¿ƒåŠ›é‡è®­ç»ƒ",likes:8,avatarColor:"#4ECDC4"},{user:"çŽ‹å¼º",time:"1å°æ—¶å‰",action:"åˆ·æ–°äº†",result:"3000ç±³ä¸ªäººè®°å½•",likes:25,avatarColor:"#45B7D1"}]);const A=a([{name:"æ™¨è·‘å…ˆé”‹é˜Ÿ",members:56,distance:2300,heat:9800},{name:"é•¿è·‘èè‹±å›¢",members:48,distance:1800,heat:8500},{name:"æ ¡å›­é©¬æ‹‰æ¾ç¤¾",members:42,distance:1205,heat:7200},{name:"é˜³å…‰è¿åŠ¨é˜Ÿ",members:35,distance:980,heat:6e3}]),J=()=>{const a=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEEAD"];return a[Math.floor(Math.random()*a.length)]},M=()=>{y({url:"/pages/student/tasks/list"})},O=()=>{y({url:"/pages/ai-police/ai-police"})},H=()=>{y({url:"/pages/activity/list"})},R=()=>{v({title:"åˆ›å»ºåŠŸèƒ½å³å°†ä¸Šçº¿",icon:"none"})},G=()=>{v({title:"åŠ å…¥åŠŸèƒ½å³å°†ä¸Šçº¿",icon:"none"})},K=()=>{v({title:"è·‘å›¢è¯¦æƒ…",icon:"none"})},L=()=>{N.value=!0},P=()=>{N.value=!1};return(a,s)=>{const t=C,e=u,v=b;return n(),l(e,{class:"home-container"},{default:c((()=>[i(e,{class:"custom-navbar",style:o({paddingTop:D.value+"px"})},{default:c((()=>[i(e,{class:"navbar-content"},{default:c((()=>[i(t,{class:"navbar-title"},{default:c((()=>[d("é¦–é¡µ")])),_:1})])),_:1})])),_:1},8,["style"]),i(e,{class:"content-wrapper",style:o({paddingTop:D.value+44+"px"})},{default:c((()=>[i(e,{class:"student-dashboard"},{default:c((()=>[i(e,{class:"header-section"},{default:c((()=>[I.value?(n(),l(e,{key:0,class:"teacher-task-box",onClick:M},{default:c((()=>[i(e,{class:"task-icon-box"},{default:c((()=>[i(t,{class:"task-icon"},{default:c((()=>[d("ðŸ“¢")])),_:1})])),_:1}),i(e,{class:"task-content"},{default:c((()=>[i(t,{class:"task-title"},{default:c((()=>[d("è€å¸ˆå‘å¸ƒäº†æ–°ä»»åŠ¡")])),_:1}),i(t,{class:"task-desc"},{default:c((()=>[d(r(I.value.title),1)])),_:1})])),_:1}),i(e,{class:"task-action"},{default:c((()=>[i(t,{class:"btn-text"},{default:c((()=>[d("åŽ»å®Œæˆ")])),_:1})])),_:1})])),_:1})):f("",!0),i(e,{class:"student-func-grid"},{default:c((()=>[i(e,{class:"stu-func-item",onClick:O},{default:c((()=>[i(e,{class:"stu-func-icon"},{default:c((()=>[d("ðŸ¤–")])),_:1}),i(t,{class:"stu-func-name"},{default:c((()=>[d("AIè®¡æ•°")])),_:1})])),_:1}),i(e,{class:"stu-func-item",onClick:H},{default:c((()=>[i(e,{class:"stu-func-icon"},{default:c((()=>[d("ðŸš©")])),_:1}),i(t,{class:"stu-func-name"},{default:c((()=>[d("è·‘å›¢æ´»åŠ¨")])),_:1})])),_:1}),i(e,{class:"stu-func-item",onClick:s[0]||(s[0]=a=>_({url:"/pages/test/test"}))},{default:c((()=>[i(e,{class:"stu-func-icon"},{default:c((()=>[d("ðŸ“Š")])),_:1}),i(t,{class:"stu-func-name"},{default:c((()=>[d("ä½“æµ‹æˆç»©")])),_:1})])),_:1}),i(e,{class:"stu-func-item",onClick:s[1]||(s[1]=a=>_({url:"/pages/mine/mine"}))},{default:c((()=>[i(e,{class:"stu-func-icon"},{default:c((()=>[d("ðŸ‘¤")])),_:1}),i(t,{class:"stu-func-name"},{default:c((()=>[d("ä¸ªäººä¸­å¿ƒ")])),_:1})])),_:1})])),_:1})])),_:1}),i(e,{class:"section-container module-card"},{default:c((()=>[i(e,{class:"section-header"},{default:c((()=>[i(t,{class:"section-title"},{default:c((()=>[d("ä½“èƒ½è€ƒæ ¸é¡¹ç›®")])),_:1})])),_:1}),i(e,{class:"test-project-list"},{default:c((()=>[(n(!0),m(k,null,p(S.value,((a,s)=>(n(),l(e,{class:"test-card",key:s,onClick:s=>(a=>{_({url:"/pages/test/test?project="+a.name+"&type="+a.type})})(a)},{default:c((()=>[i(e,{class:"test-icon"},{default:c((()=>[d(r("pull-up"===a.type?"ðŸ’ª":"sit-up"===a.type?"ðŸ§˜":"ðŸ‹ï¸"),1)])),_:2},1024),i(e,{class:"test-info"},{default:c((()=>[i(t,{class:"test-name"},{default:c((()=>[d(r(a.name),1)])),_:2},1024),i(e,{class:"test-tags"},{default:c((()=>[i(t,{class:h(["tag-small",a.tagClass])},{default:c((()=>[d(r(a.tag),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024),i(t,{class:"test-status"},{default:c((()=>[d(r(a.status),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),i(e,{class:"section-container module-card"},{default:c((()=>[i(e,{class:"section-header",onClick:s[2]||(s[2]=a=>$.value=!$.value)},{default:c((()=>[i(t,{class:"section-title"},{default:c((()=>[d("ä¸“é¡¹è®­ç»ƒè®¡åˆ’")])),_:1}),i(t,{class:"section-more"},{default:c((()=>[d(r($.value?"æ”¶èµ·":"å±•å¼€"),1)])),_:1})])),_:1}),$.value?(n(),l(e,{key:0,class:"training-list"},{default:c((()=>[(n(!0),m(k,null,p(T.value,((a,s)=>(n(),l(e,{class:"training-card",key:s,onClick:s=>(a=>{y({url:`/pages/run/run?mode=training&planId=${a.id}&name=${a.name}`})})(a)},{default:c((()=>[i(e,{class:"card-left"},{default:c((()=>[i(e,{class:h(["tag-box",a.typeClass])},{default:c((()=>[i(t,{class:"tag-text"},{default:c((()=>[d(r(a.type),1)])),_:2},1024)])),_:2},1032,["class"]),i(e,{class:"training-info"},{default:c((()=>[i(t,{class:"training-name"},{default:c((()=>[d(r(a.name),1)])),_:2},1024),i(t,{class:"training-meta"},{default:c((()=>[d(r(a.duration)+"åˆ†é’Ÿ Â· "+r(a.difficulty),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(e,{class:"card-right"},{default:c((()=>[a.isCompleted?(n(),l(e,{key:0,class:"status-icon"},{default:c((()=>[i(t,null,{default:c((()=>[d("âœ…")])),_:1})])),_:1})):(n(),l(e,{key:1,class:"start-btn-small"},{default:c((()=>[i(t,null,{default:c((()=>[d("å¼€å§‹")])),_:1})])),_:1}))])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):f("",!0)])),_:1}),i(e,{class:"section-container module-card"},{default:c((()=>[i(e,{class:"section-header"},{default:c((()=>[i(t,{class:"section-title"},{default:c((()=>[d("è·‘å›¢è”ç›Ÿ")])),_:1}),i(e,{class:"header-actions"},{default:c((()=>[i(t,{class:"action-link",onClick:R},{default:c((()=>[d("åˆ›å»º")])),_:1}),i(t,{class:"divider"},{default:c((()=>[d("|")])),_:1}),i(t,{class:"action-link",onClick:G},{default:c((()=>[d("åŠ å…¥")])),_:1}),i(t,{class:"divider"},{default:c((()=>[d("|")])),_:1}),i(t,{class:"action-link",onClick:H},{default:c((()=>[d("æ´»åŠ¨æµè§ˆ")])),_:1})])),_:1})])),_:1}),i(e,{class:"my-club-card",onClick:K},{default:c((()=>[i(e,{class:"club-bg-overlay"}),i(e,{class:"club-info"},{default:c((()=>[i(e,{class:"club-header"},{default:c((()=>[i(t,{class:"club-name"},{default:c((()=>[d(r(q.value.name),1)])),_:1}),i(t,{class:"club-rank"},{default:c((()=>[d("No."+r(q.value.rank),1)])),_:1})])),_:1}),i(e,{class:"club-stats"},{default:c((()=>[i(e,{class:"stat-box"},{default:c((()=>[i(t,{class:"val"},{default:c((()=>[d(r(q.value.members),1)])),_:1}),i(t,{class:"label"},{default:c((()=>[d("æˆå‘˜")])),_:1})])),_:1}),i(e,{class:"stat-box"},{default:c((()=>[i(t,{class:"val"},{default:c((()=>[d(r(q.value.totalDistance),1)])),_:1}),i(t,{class:"label"},{default:c((()=>[d("æ€»é‡Œç¨‹(km)")])),_:1})])),_:1}),i(e,{class:"stat-box"},{default:c((()=>[i(t,{class:"val"},{default:c((()=>[d(r(q.value.activityCount),1)])),_:1}),i(t,{class:"label"},{default:c((()=>[d("æœ¬æœˆæ´»åŠ¨")])),_:1})])),_:1})])),_:1})])),_:1}),i(e,{class:"rank-entry",onClick:g(L,["stop"])},{default:c((()=>[i(t,{class:"rank-icon"},{default:c((()=>[d("ðŸ†")])),_:1}),i(t,{class:"rank-text"},{default:c((()=>[d("æŽ’è¡Œæ¦œ")])),_:1})])),_:1})])),_:1}),i(e,{class:"community-feed"},{default:c((()=>[i(t,{class:"feed-title"},{default:c((()=>[d("æœ€æ–°åŠ¨æ€")])),_:1}),i(v,{"scroll-x":"",class:"activity-scroll"},{default:c((()=>[(n(!0),m(k,null,p(z.value,((a,s)=>(n(),l(e,{class:"activity-card",key:s,onClick:s=>(a=>{y({url:`/pages/activity/detail?name=${a.name}`})})(a)},{default:c((()=>[i(e,{class:h(["act-tag",a.statusClass])},{default:c((()=>[d(r(a.status),1)])),_:2},1032,["class"]),i(t,{class:"act-name"},{default:c((()=>[d(r(a.name),1)])),_:2},1024),i(t,{class:"act-time"},{default:c((()=>[d("ðŸ•’ "+r(a.time),1)])),_:2},1024),i(e,{class:"act-users"},{default:c((()=>[i(e,{class:"avatar-group"},{default:c((()=>[(n(),m(k,null,p(3,(a=>i(e,{class:"avatar-circle",key:a,style:o({backgroundColor:J()})},null,8,["style"]))),64))])),_:1}),i(t,{class:"act-count"},{default:c((()=>[d(r(a.joined)+"äººå·²æŠ¥å",1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})])),_:1}),i(e,{style:{height:"120rpx"}}),i(j,{current:"/pages/home/home"}),N.value?(n(),l(e,{key:0,class:"modal-overlay",onClick:P},{default:c((()=>[i(e,{class:"rank-modal",onClick:s[3]||(s[3]=g((()=>{}),["stop"]))},{default:c((()=>[i(e,{class:"modal-header"},{default:c((()=>[i(t,{class:"modal-title"},{default:c((()=>[d("ðŸ† è·‘å›¢æŽ’è¡Œæ¦œ")])),_:1}),i(t,{class:"close-btn",onClick:P},{default:c((()=>[d("Ã—")])),_:1})])),_:1}),i(e,{class:"rank-list"},{default:c((()=>[(n(!0),m(k,null,p(A.value,((a,s)=>(n(),l(e,{class:"rank-item",key:s},{default:c((()=>[i(e,{class:h(["rank-num","rank-"+(s+1)])},{default:c((()=>[d(r(s+1),1)])),_:2},1032,["class"]),i(e,{class:"rank-info"},{default:c((()=>[i(t,{class:"rank-name"},{default:c((()=>[d(r(a.name),1)])),_:2},1024),i(t,{class:"rank-detail"},{default:c((()=>[d(r(a.members)+"äºº / "+r(a.distance)+"km",1)])),_:2},1024)])),_:2},1024),i(e,{class:"rank-trend"},{default:c((()=>[i(t,null,{default:c((()=>[d("ðŸ”¥ "+r(a.heat),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):f("",!0)])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-ad3add4a"]]);export{D as default};
