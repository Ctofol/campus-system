import{a as t,a2 as a,C as e,p as s,b as o}from"./index-D4dSIJeF.js";let i="http://127.0.0.1:8000";try{const t=location&&location.protocol?location.protocol:"http:";i=`${t}//${location&&location.hostname?location.hostname:"localhost"}:8000`}catch(f){i="http://127.0.0.1:8000"}const r=i,n=(...i)=>{let n={};return n="string"==typeof i[0]?{url:i[0],...i[1]}:i[0]||{},new Promise(((i,h)=>{const l=t("token"),u={"Content-Type":"application/json",...n.header||{}};l&&(u.Authorization=`Bearer ${l}`),a({url:`${r}${n.url}`,method:n.method||"GET",data:n.data||{},header:u,success:t=>{t.statusCode>=200&&t.statusCode<300?i(t.data):401===t.statusCode?(e("token"),e("userInfo"),s({title:"登录已过期，请重新登录",icon:"none"}),setTimeout((()=>{o({url:"/pages/login/login"})}),1500),h(t.data)):(s({title:t.data.detail||"请求失败",icon:"none"}),h(t.data))},fail:t=>{s({title:"网络请求失败",icon:"none"}),h(t)}})}))},h=t=>n({url:"/auth/login",method:"POST",data:t}),l=t=>n({url:"/auth/register",method:"POST",data:t}),u=t=>n({url:"/activity/finish",method:"POST",data:t}),c=t=>{let a="";return t&&(a=`?page=${t.page}&size=${t.size}`),n({url:`/teacher/activities${a}`,method:"GET"})},d=t=>n({url:`/teacher/activity/${t}/approve`,method:"POST"}),p=t=>n({url:"/teacher/tasks",method:"POST",data:t}),$=t=>n({url:`/teacher/tasks/${t}`,method:"DELETE"}),m=t=>{let a="";if(t){const e=[];t.page&&e.push(`page=${t.page}`),t.size&&e.push(`size=${t.size}`),t.status&&e.push(`status=${t.status}`),e.length>0&&(a=`?${e.join("&")}`)}return n({url:`/teacher/tasks${a}`,method:"GET"})},g=t=>{let a="";if(t){const e=[];t.page&&e.push(`page=${t.page}`),t.size&&e.push(`size=${t.size}`),t.status&&e.push(`status=${t.status}`),e.length>0&&(a=`?${e.join("&")}`)}return n({url:`/student/tasks${a}`,method:"GET"})},T=(t,a)=>n({url:`/teacher/student/${t}/activities`,method:"GET",data:a}),k=t=>n({url:`/teacher/tasks/${t}`,method:"GET"}),E=()=>n({url:"/checkpoints",method:"GET"}),z=t=>n({url:"/activity/checkin",method:"POST",data:t});export{r as B,E as a,l as b,z as c,m as d,$ as e,k as f,g,p as h,c as i,d as j,T as k,h as l,n as r,u as s};
