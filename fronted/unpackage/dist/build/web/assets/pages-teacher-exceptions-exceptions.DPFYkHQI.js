import{r as a,x as e,c as t,w as s,i as l,o as d,a as c,b as u,t as i,l as n,f as r,h as o,F as f,d as _,k as m,S as v,C as p,s as y,aa as g,q as k}from"./index-uRXP6RJd.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const h=C({__name:"exceptions",setup(C){const h=a("all"),x=a([{id:1,type:"heart_rate",typeText:"心率过高",typeClass:"tag-red",studentName:"张三",studentId:"2023001",time:"10:30",value:"195 bpm",standard:"60-180 bpm",description:"跑步过程中持续3分钟心率超过安全阈值，建议暂停训练并检查身体状况。",level:"urgent"},{id:2,type:"pace",typeText:"配速异常",typeClass:"tag-orange",studentName:"李四",studentId:"2023002",time:"10:45",value:"2'30\"/km",standard:"4'00\"-8'00\"/km",description:"短时间内配速极快，疑似骑车或数据漂移。",level:"normal"},{id:3,type:"location",typeText:"轨迹异常",typeClass:"tag-blue",studentName:"王五",studentId:"2023003",time:"09:15",value:"直线穿越",standard:"连续轨迹",description:"轨迹点之间距离过大，且无中间路径，疑似GPS信号丢失或作弊。",level:"normal"}]),b=e((()=>x.value.length)),I=a(5),N=e((()=>"all"===h.value?x.value:x.value.filter((a=>a.level===h.value))));return(a,e)=>{const C=m,T=l,w=k,z=v;return d(),t(T,{class:"container"},{default:s((()=>[c(T,{class:"header"},{default:s((()=>[c(C,{class:"page-title"},{default:s((()=>[u("异常处理")])),_:1}),c(T,{class:"stats-row"},{default:s((()=>[c(T,{class:"stat-item"},{default:s((()=>[c(C,{class:"stat-num"},{default:s((()=>[u(i(b.value),1)])),_:1}),c(C,{class:"stat-desc"},{default:s((()=>[u("待处理")])),_:1})])),_:1}),c(T,{class:"stat-item"},{default:s((()=>[c(C,{class:"stat-num"},{default:s((()=>[u(i(I.value),1)])),_:1}),c(C,{class:"stat-desc"},{default:s((()=>[u("今日新增")])),_:1})])),_:1})])),_:1})])),_:1}),c(T,{class:"filter-bar"},{default:s((()=>[c(C,{class:n(["filter-item",{active:"all"===h.value}]),onClick:e[0]||(e[0]=a=>h.value="all")},{default:s((()=>[u("全部")])),_:1},8,["class"]),c(C,{class:n(["filter-item",{active:"urgent"===h.value}]),onClick:e[1]||(e[1]=a=>h.value="urgent")},{default:s((()=>[u("紧急")])),_:1},8,["class"]),c(C,{class:n(["filter-item",{active:"normal"===h.value}]),onClick:e[2]||(e[2]=a=>h.value="normal")},{default:s((()=>[u("一般")])),_:1},8,["class"])])),_:1}),c(z,{"scroll-y":"",class:"alert-list"},{default:s((()=>[(d(!0),r(f,null,o(N.value,((a,e)=>(d(),t(T,{class:"alert-card",key:a.id},{default:s((()=>[c(T,{class:"card-header"},{default:s((()=>[c(T,{class:"header-left"},{default:s((()=>[c(T,{class:n(["type-tag",a.typeClass])},{default:s((()=>[u(i(a.typeText),1)])),_:2},1032,["class"]),c(C,{class:"student-name"},{default:s((()=>[u(i(a.studentName),1)])),_:2},1024),c(C,{class:"student-id"},{default:s((()=>[u(i(a.studentId),1)])),_:2},1024)])),_:2},1024),c(C,{class:"time"},{default:s((()=>[u(i(a.time),1)])),_:2},1024)])),_:2},1024),c(T,{class:"card-body"},{default:s((()=>[c(T,{class:"data-row"},{default:s((()=>[c(C,{class:"label"},{default:s((()=>[u("异常数据：")])),_:1}),c(C,{class:"value highlight"},{default:s((()=>[u(i(a.value),1)])),_:2},1024),c(C,{class:"standard"},{default:s((()=>[u("（标准范围："+i(a.standard)+"）",1)])),_:2},1024)])),_:2},1024),c(T,{class:"desc-box"},{default:s((()=>[c(C,{class:"desc-title"},{default:s((()=>[u("异常说明：")])),_:1}),c(C,{class:"desc-content"},{default:s((()=>[u(i(a.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),c(T,{class:"card-footer"},{default:s((()=>[c(w,{class:"action-btn ignore",size:"mini",onClick:e=>{return t=a.id,void p({title:"确认忽略",content:"忽略后该异常将不再提醒，确认操作？",success:a=>{a.confirm&&(x.value=x.value.filter((a=>a.id!==t)),y({title:"已忽略",icon:"none"}))}});var t}},{default:s((()=>[u("忽略")])),_:2},1032,["onClick"]),c(w,{class:"action-btn notify",size:"mini",onClick:e=>(a=>{y({title:`已发送通知给 ${a.studentName}`,icon:"success"})})(a)},{default:s((()=>[u("通知学生")])),_:2},1032,["onClick"]),c(w,{class:"action-btn handle",size:"mini",onClick:e=>(a=>{g({itemList:["标记为无效成绩","标记为设备故障","要求重测"],success:e=>{y({title:`已标记为：${["无效成绩","设备故障","重测"][e.tapIndex]}`,icon:"success"}),x.value=x.value.filter((e=>e.id!==a.id))}})})(a)},{default:s((()=>[u("处理")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),0===N.value.length?(d(),t(T,{key:0,class:"empty-state"},{default:s((()=>[c(C,{class:"empty-text"},{default:s((()=>[u("暂无异常数据")])),_:1})])),_:1})):_("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-2af165c1"]]);export{h as default};
