import{r as e,c as l,w as a,i as s,o,d as t,e as u,q as c,t as d,j as n,F as i,f as r,T as p,s as m,p as f,v,I as h,U as _}from"./index-C5iLBQvu.js";import{b as V}from"./request.BfbRFve_.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const k=w({__name:"register",setup(w){const k=e(1),b=e(!1),y=e({role:"student",name:"",phone:"",code:"",password:"",confirmPwd:"",school:"",college:"",major:"",class:"",empId:"",department:"",isPoliceSchool:!1}),g=e=>{y.value.role=e},U=()=>{k.value=2},x=e=>{y.value.isPoliceSchool=e.detail.value},C=()=>{p()},P=()=>{if(!y.value.phone)return void m({title:"è¯·å…ˆè¾“å…¥æ‰‹æœºå·",icon:"none"});/^1[3-9]\d{9}$/.test(y.value.phone)?m({title:"éªŒè¯ç å·²å‘é€",icon:"success"}):m({title:"æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®",icon:"none"})},j=async()=>{const e=y.value;if(!e.name||!e.phone||!e.password)return void m({title:"è¯·å®Œå–„åŸºç¡€ä¿¡æ¯",icon:"none"});if(/^1[3-9]\d{9}$/.test(e.phone))if(e.password.length<6)m({title:"å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä½",icon:"none"});else if(e.password===e.confirmPwd)if("student"!==e.role||e.school&&e.class)if("teacher"!==e.role||e.empId&&e.department){b.value=!0;try{await V({phone:e.phone,name:e.name,role:e.role,password:e.password}),m({title:"æ³¨å†ŒæˆåŠŸ",icon:"success"}),setTimeout((()=>{p()}),1500)}catch(l){console.error("Register failed:",l)}finally{b.value=!1}}else m({title:"è¯·å®Œå–„æ•™å¸ˆä¿¡æ¯",icon:"none"});else m({title:"è¯·å®Œå–„å­¦ç”Ÿä¿¡æ¯",icon:"none"});else m({title:"ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´",icon:"none"});else m({title:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·",icon:"none"})};return(e,p)=>{const m=f,V=s,w=v,I=h,S=_;return o(),l(V,{class:"register-container"},{default:a((()=>[t(V,{class:"header-section"},{default:a((()=>[t(m,{class:"title"},{default:a((()=>[u("æ³¨å†Œæ–°è´¦å·")])),_:1}),t(m,{class:"sub-title"},{default:a((()=>[u("åŠ å…¥æ ¡å›­è¿åŠ¨å¥åº·å¹³å°")])),_:1})])),_:1}),t(V,{class:"register-card"},{default:a((()=>[1===k.value?(o(),l(V,{key:0,class:"role-select-box"},{default:a((()=>[t(m,{class:"step-title"},{default:a((()=>[u("è¯·é€‰æ‹©æ‚¨çš„èº«ä»½")])),_:1}),t(V,{class:"role-options"},{default:a((()=>[t(V,{class:c(["role-option",{active:"student"===y.value.role}]),onClick:p[0]||(p[0]=e=>g("student"))},{default:a((()=>[t(m,{class:"role-icon"},{default:a((()=>[u("ğŸ‘¨â€ğŸ“")])),_:1}),t(m,{class:"role-name"},{default:a((()=>[u("æˆ‘æ˜¯å­¦ç”Ÿ")])),_:1})])),_:1},8,["class"]),t(V,{class:c(["role-option",{active:"teacher"===y.value.role}]),onClick:p[1]||(p[1]=e=>g("teacher"))},{default:a((()=>[t(m,{class:"role-icon"},{default:a((()=>[u("ğŸ‘¨â€ğŸ«")])),_:1}),t(m,{class:"role-name"},{default:a((()=>[u("æˆ‘æ˜¯æ•™å¸ˆ")])),_:1})])),_:1},8,["class"])])),_:1}),t(w,{class:"next-btn",onClick:U},{default:a((()=>[u("ä¸‹ä¸€æ­¥")])),_:1})])),_:1})):(o(),l(V,{key:1,class:"form-box"},{default:a((()=>[t(V,{class:"form-header"},{default:a((()=>[t(m,{class:"back-text",onClick:p[2]||(p[2]=e=>k.value=1)},{default:a((()=>[u("è¿”å›ä¿®æ”¹èº«ä»½")])),_:1}),t(m,{class:"current-role"},{default:a((()=>[u("å½“å‰èº«ä»½ï¼š"+d("student"===y.value.role?"å­¦ç”Ÿ":"æ•™å¸ˆ"),1)])),_:1})])),_:1}),t(V,{class:"section-title"},{default:a((()=>[u("åŸºç¡€ä¿¡æ¯")])),_:1}),t(V,{class:"input-item"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.name,"onUpdate:modelValue":p[3]||(p[3]=e=>y.value.name=e),placeholder:"çœŸå®å§“å"},null,8,["modelValue"])])),_:1}),t(V,{class:"input-item"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.phone,"onUpdate:modelValue":p[4]||(p[4]=e=>y.value.phone=e),type:"number",placeholder:"æ‰‹æœºå·ç "},null,8,["modelValue"])])),_:1}),t(V,{class:"input-item code-box"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.code,"onUpdate:modelValue":p[5]||(p[5]=e=>y.value.code=e),type:"number",placeholder:"éªŒè¯ç "},null,8,["modelValue"]),t(m,{class:"get-code",onClick:P},{default:a((()=>[u("è·å–éªŒè¯ç ")])),_:1})])),_:1}),t(V,{class:"input-item"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.password,"onUpdate:modelValue":p[6]||(p[6]=e=>y.value.password=e),type:"password",placeholder:"è®¾ç½®å¯†ç  (6-16ä½)"},null,8,["modelValue"])])),_:1}),t(V,{class:"input-item"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.confirmPwd,"onUpdate:modelValue":p[7]||(p[7]=e=>y.value.confirmPwd=e),type:"password",placeholder:"ç¡®è®¤å¯†ç "},null,8,["modelValue"])])),_:1}),t(V,{class:"section-title"},{default:a((()=>[u("èº«ä»½ä¿¡æ¯")])),_:1}),"student"===y.value.role?(o(),n(i,{key:0},[t(V,{class:"input-item"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.school,"onUpdate:modelValue":p[8]||(p[8]=e=>y.value.school=e),placeholder:"å­¦æ ¡åç§°"},null,8,["modelValue"])])),_:1}),t(V,{class:"input-item"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.college,"onUpdate:modelValue":p[9]||(p[9]=e=>y.value.college=e),placeholder:"æ‰€å±å­¦é™¢"},null,8,["modelValue"])])),_:1}),t(V,{class:"input-item"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.major,"onUpdate:modelValue":p[10]||(p[10]=e=>y.value.major=e),placeholder:"ä¸“ä¸š"},null,8,["modelValue"])])),_:1}),t(V,{class:"input-item"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.class,"onUpdate:modelValue":p[11]||(p[11]=e=>y.value.class=e),placeholder:"ç­çº§ (å¦‚: 22çº§3ç­)"},null,8,["modelValue"])])),_:1})],64)):r("",!0),"teacher"===y.value.role?(o(),n(i,{key:1},[t(V,{class:"input-item"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.school,"onUpdate:modelValue":p[12]||(p[12]=e=>y.value.school=e),placeholder:"å­¦æ ¡åç§°"},null,8,["modelValue"])])),_:1}),t(V,{class:"input-item"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.empId,"onUpdate:modelValue":p[13]||(p[13]=e=>y.value.empId=e),placeholder:"æ•™å¸ˆå·¥å·"},null,8,["modelValue"])])),_:1}),t(V,{class:"input-item"},{default:a((()=>[t(I,{class:"input",modelValue:y.value.department,"onUpdate:modelValue":p[14]||(p[14]=e=>y.value.department=e),placeholder:"æ‰€å±éƒ¨é—¨ (å¦‚: è­¦ä½“æ•™ç ”å®¤)"},null,8,["modelValue"])])),_:1})],64)):r("",!0),t(V,{class:"police-switch-box"},{default:a((()=>[t(V,{class:"switch-header"},{default:a((()=>[t(m,{class:"switch-label"},{default:a((()=>[u("è­¦æ ¡/å†›æ ¡ç”¨æˆ·")])),_:1}),t(S,{checked:y.value.isPoliceSchool,onChange:x,color:"#20C997",style:{transform:"scale(0.8)"}},null,8,["checked"])])),_:1}),y.value.isPoliceSchool?(o(),l(m,{key:0,class:"switch-tip"},{default:a((()=>[u(" * å‹¾é€‰åï¼Œç³»ç»Ÿå°†å¼€å¯é€‚é…è­¦æ ¡/å†›æ ¡ä½“æµ‹æ ‡å‡†çš„ä¸“é¡¹è®­ç»ƒæ¨¡å— ")])),_:1})):r("",!0)])),_:1}),t(w,{class:"submit-btn",onClick:j,loading:b.value},{default:a((()=>[u("ç«‹å³æ³¨å†Œ")])),_:1},8,["loading"])])),_:1})),t(V,{class:"footer-link"},{default:a((()=>[t(m,{class:"link-text",onClick:C},{default:a((()=>[u("å·²æœ‰è´¦å·ï¼Ÿè¿”å›ç™»å½•")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-75621fb6"]]);export{k as default};
